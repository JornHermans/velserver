 VMB4RYNO
4 channel relay module with normal
open contacts for VELBUS system




           VMB1RYNO PROTOCOL – edition 4   1
Binairy format:
<SOF-SID10...SID0-RTR-IDE-r0-DLC3...0-DATABYTE1...DATABYTEn-CRC14...CRC1-CRCDEL-ACK-ACKDEL-
EOF7...EOF1-IFS3...IFS1>
   bits                         Description
   SOF                          Start Of Frame (always 0)
   SID10 & SID9                 Priority (00: highest … 11: lowest priority)
   SID8…SID1                    Address
   SID0                         Always 0
   RTR                          Remote Transmit Request
   IDE                          Identifier Extension (always 0)
   R0                           reserved (always 0)
   DLC3…DLC0                    Data Length Code (0…8)
   Databyte1                    Command
   Databyte2                    Parameter
   Databyte3                    Parameter
   Databyte4                    Parameter
   Databyte5                    Parameter
   Databyte6                    Parameter
   Databyte7                    Parameter
   Databyte8                    Parameter
   CRC14…CRC1                   Cyclic Redundancy Checksum
   CRCDEL                       CRC Delimiter (always 1)
   ACK                          Acknowledge slot (transmit 1 readback 0 if received correctly)
   ACKDEL                       Acknowledge Delimiter (always 1)
   EOF7...EOF1                  End Of Frame (always 1111111)
   IFS3...IFS1                  InterFrame Space (always 111)

The relay module can transmit the following commands:
  Clears LEDs on a push button module
  Sets LEDs on a push button module
  Blinks LEDs slowly on a push button module
  Blinks LEDs fast on a push button module
  Blinks LEDs very fast on a push button module

The relay module can transmit the following messages:
  Relay status
  Relays switch status
  Module type
  Bus error counter status
  First, second and third part of the relay name
  Memory data
  Memory data block (4 bytes)

The relay module can receive the following messages:
  Push button status

The relay module can receive the following commands:
  Switch relay off
  Switch relay on
  Start relay timer
  Start relay blinking timer
  Forced off relay (Build 1105 or higher)
  Cancel forced off relay (Build 1105 or higher)
  Forced on relay (Build 1105 or higher)
  Cancel forced on relay (Build 1105 or higher)
  Inhibit relay (Build 1105 or higher)
  Cancel inhibit relay (Build 1105 or higher)
  Relay status request
  Clear Push button Led



                                          VMB1RYNO PROTOCOL – edition 4                          2
     Module type request
     Bus error counter status request
     Relay name request
     Read memory data
     Read memory data block (4 bytes)
     Memory dump request
     Write memory data
     Write memory data block (4 bytes)
     Write module address and serial number



Transmits the push button & relay switch status:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes to send
    DATABYTE1 = COMMAND_PUSH_BUTTON_STATUS (H’00’)
    DATABYTE2 = Local mode push buttons just pressed / relays just switched on (1 = just pressed / switched on)
    DATABYTE3 = Local mode push buttons just released / relays just switched off (1 = just released / switched off)
    DATABYTE4 = Local mode push buttons long pressed (1 = longer than 0.85s pressed)
                                                                       Databyte2            Databyte3        Databyte4
                           Relay channel 1 just switched on            B’xxxxxxx1’         B’xxxxxxx0’       B’xxxxxxx0’
                           Relay channel 1 just switched off           B’xxxxxxx0’         B’000x0001’       B’xxxxxxx0’
                           Relay channel 2 just switched on            B’xxxxxx1x’         B’xxxxxx0x’       B’xxxxxx0x’
                           Relay channel 2 just switched off           B’xxxxxx0x’         B’xxxxxx1x’       B’xxxxxx0x’
                           Relay channel 3 just switched on            B’xxxxx1xx’         B’xxxxx0xx’       B’xxxxx0xx’
                           Relay channel 3 just switched off           B’xxxxx0xx’         B’xxxxx1xx’       B’xxxxx0xx’
                           Relay channel 4 just switched on            B’xxxx1xxx’         B’xxxx0xxx’       B’xxxx0xxx’
                           Relay channel 4 just switched off           B’xxxx0xxx’         B’xxxx1xxx’       B’xxxx0xxx’
                        Virtual relay channel 5 just switched on       B’xxx1xxxx’         B’xxx0xxxx’       B’xxx0xxxx’
                        Virtual relay channel 5 just switched off      B’xxx0xxxx’         B’xxx1xxxx’       B’xxx0xxxx’

Transmit: Clears LEDs on a push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the push button module for clearing LEDs
    RTR = 0
    DLC3...DLC0 = 2 databytes to send
    DATABYTE1 = COMMAND_CLEAR_LED (H’F5’)
    DATABYTE2 = LED bit numbers (1 = clear LED)

Transmit: Sets LEDs on a push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the push button module for setting LEDs on
    RTR = 0
    DLC3...DLC0 = 2 databytes to send
    DATABYTE1 = COMMAND_SET_LED (H’F6’)
    DATABYTE2 = LED bit numbers (1 = set LED)

Transmit: Blinks LEDs slowly on a push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the push button module for slowly blinking LEDs
    RTR = 0
    DLC3...DLC0 = 2 databytes to send
    DATABYTE1 = COMMAND_SLOW_BLINKING_LED (H’F7’)
    DATABYTE2 = LED bit numbers (1 = slow blink LED)

Transmit: Blinks LEDs fast on a push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the push button module for fast blinking LEDs
    RTR = 0
    DLC3...DLC0 = 2 databytes to send
    DATABYTE1 = COMMAND_FAST_BLINKING_LED (H’F8’)
    DATABYTE2 = LED bit numbers (1 = fast blink LED)



                                               VMB1RYNO PROTOCOL – edition 4                                          3
Transmit: Blinks LEDs very fast on a push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the push button module for very fast blinking LEDs
    RTR = 0
    DLC3...DLC0 = 2 databytes to send
    DATABYTE1 = COMMAND_VERYFAST_BLINKING_LED (H’F9’)
    DATABYTE2 = LED bit numbers (1 = very fast blink LED)


Transmit: Bus error counter status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes to send
    DATABYTE1 = COMMAND_BUSERROR_COUNTER_STATUS (H’DA’)
    DATABYTE2 = Transmit error counter
    DATABYTE3 = Receive error counter
    DATABYTE4 = Bus off counter

Transmits the relay status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 databytes to send
    DATABYTE1 = COMMAND_RELAY_STATUS (H’FB’)
    DATABYTE2 = Relay bit number
                       Contents       Relay number
                  B’00000001’         Channel 1
                  B’00000010’         Channel 2
                  B’00000100’         Channel 3
                  B’00001000’         Channel 4
                  B’00010000’         Virtual Channel 5
    DATABYTE3 = Disable/inhibit/Forced on setting
                      Contents        Setting
                    B’xxxxxx00’       Channel normal
                    B’xxxxxx01’       Channel inhibited
                    B’xxxxxx10’       Channel forced on
                    B’xxxxxx11’       Channel disabled
    DATABYTE4 = Relay status
                       Contents       Relay status
                  B’xxxxxx00’         Relay channel off
                  B’xxxxxx01’         Relay channel on
                  B’xxxxxx11’         Relay channel interval timer on
    DATABYTE5 = Led status
                  Contents            Mode
                  B’00000000’         LED off
                  B’10000000’         LED on
                  B’01000000’         LED slow blinking
                  B’00100000’         LED fast blinking
                  B’00010000’         LED very fast blinking
    DATABYTE6 = high byte of current delay time
    DATABYTE7 = mid byte of current delay time
    DATABYTE8 = low byte of current delay time

    Remark:
    [DATABYTE6][DATABYTE7][DATABYTE8] contain a 24-bit time in seconds




                                          VMB1RYNO PROTOCOL – edition 4           4
Transmits the module type:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 databytes to send
    DATABYTE1 = COMMAND_MODULE_TYPE (H’FF’)
    DATABYTE2 = VMB4RYNO_TYPE (H’11’)
    DATABYTE3 = High byte of serial number
    DATABYTE4 = Low byte of serial number
    DATABYTE5 = Memorymap version
    DATABYTE6 = Build year
    DATABYTE7 = Build week

Transmits the memory data:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes to send
    DATABYTE1 = COMMAND_MEMORY_DATA (H’FE’)
    DATABYTE2 = High memory address
                  High address        Memory bank
                     H’00’            For channel 1 data
                     H’01’            For channel 2 data
                     H’02’            For channel 3 data
                     H’03’            For channel 4 data
                     H’04’            For virtual channel 5 data
    DATABYTE3 = LOW memory address (H’00’...H’FF’)
    DATABYTE4 = memory data

Transmits memory data block (4 bytes):
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes to send
    DATABYTE1 = COMMAND_MEMORY_DATA_BLOCK (H’CC’)
    DATABYTE2 = High start address of memory block
    DATABYTE3 = LOW start address of memory block
    DATABYTE4 = memory data1
    DATABYTE5 = memory data2
    DATABYTE6 = memory data3
    DATABYTE7 = memory data4

    Remark: address range: H’0000’ to H’04FC’

Transmits the first part of the relay name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 databytes to send
    DATABYTE1 = COMMAND_RELAY_NAME_PART1 (H’F0’)
    DATABYTE2 = Relay bit number
                        Contents         Relay number
                   B’00000001’           Channel 1
                   B’00000010’           Channel 2
                   B’00000100’           Channel 3
                   B’00001000’           Channel 4
                   B’00010000’           Virtual channel 5
    DATABYTE3 = Character 1 of the relay name
    DATABYTE4 = Character 2 of the relay name
    DATABYTE5 = Character 3 of the relay name
    DATABYTE6 = Character 4 of the relay name
    DATABYTE7 = Character 5 of the relay name
    DATABYTE8 = Character 6 of the relay name




                                          VMB1RYNO PROTOCOL – edition 4   5
Transmits the second part of the relay name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 databytes to send
    DATABYTE1 = COMMAND_RELAY_NAME_PART2 (H’F1’)
    DATABYTE2 = Relay bit number
                      Contents           Relay number
                  B’00000001’            Channel 1
                  B’00000010’            Channel 2
                  B’00000100’            Channel 3
                  B’00001000’            Channel 4
                  B’00010000’            Virtual channel 5
    DATABYTE3 = Character 7 of the relay name
    DATABYTE4 = Character 8 of the relay name
    DATABYTE5 = Character 9 of the relay name
    DATABYTE6 = Character 10 of the relay name
    DATABYTE7 = Character 11 of the relay name
    DATABYTE8 = Character 12 of the relay name

Transmits the third part of the relay name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 6 databytes to send
    DATABYTE1 = COMMAND_RELAY_NAME_PART3 (H’F2’)
    DATABYTE2 = Relay bit number
                       Contents          Relay number
                   B’00000001’           Channel 1
                   B’00000010’           Channel 2
                   B’00000100’           Channel 3
                   B’00001000’           Channel 4
                   B’00010000’           Virtual channel 5
    DATABYTE3 = Character 13 of the relay name
    DATABYTE4 = Character 14 of the relay name
    DATABYTE5 = Character 14 of the relay name
    DATABYTE6 = Character 16 of the relay name

   Remarks:
   Unused characters contain H’FF’.




                                      VMB1RYNO PROTOCOL – edition 4   6
‘Push button status’ received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes received
    DATABYTE1 = COMMAND_PUSH_BUTTON_STATUS (H’00’)
    DATABYTE2 = Push buttons just pressed (1 = just pressed)
    DATABYTE3 = Push buttons just released (1 = just released)
    DATABYTE4 = Push buttons long pressed (1 = longer than 0.85s pressed)

‘Clear LED’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_CLEAR_LED (H’F5’)
    DATABYTE2 = LEDs to clear (a one clears the corresponding LED)

‘Switch relay off’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_SWITCH_RELAY_OFF (H’01’)
    DATABYTE2 = Relay bit number
                        Contents      Relay number
                    B’00000001’       Channel 1
                    B’00000010’       Channel 2
                    B’00000100’       Channel 3
                    B’00001000’       Channel 4
                    B’00010000’       Virtual channel 5

‘Switch relay on’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_SWITCH_RELAY_ON (H’02’)
    DATABYTE2 = Relay bit number
                       Contents        Relay number
                   B’00000001’         Channel 1
                   B’00000010’         Channel 2
                   B’00000100’         Channel 3
                   B’00001000’         Channel 4
                   B’00010000’         Virtual channel 5

‘Start relay timer’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 databytes received
    DATABYTE1 = COMMAND_START_RELAY_TIMER (H’03’)
    DATABYTE2 = Relay bit number
                        Contents       Relay number
                    B’00000001’        Channel 1
                    B’00000010’        Channel 2
                    B’00000100’        Channel 3
                    B’00001000’        Channel 4
                    B’00010000’        Virtual channel 5
    DATABYTE3 = high byte of delay time
    DATABYTE4 = mid byte of delay time
    DATABYTE5 = low byte of delay time




                                         VMB1RYNO PROTOCOL – edition 4      7
    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero.
    When the time parameter contains H’FFFFFF’ then the relays are permanently switched on.

‘Start relay blinking timer’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 databytes received
    DATABYTE1 = COMMAND_START_BLINK_RELAY_TIMER (H’0D’)
    DATABYTE2 = Relay bit number
                        Contents       Relay number
                   B’00000001’         Channel 1
                   B’00000010’         Channel 2
                   B’00000100’         Channel 3
                   B’00001000’         Channel 4
                   B’00010000’         Virtual channel 5
    DATABYTE3 = high byte of delay time
    DATABYTE4 = mid byte of delay time
    DATABYTE5 = low byte of delay time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero.
    When the time parameter contains H’FFFFFF’ then the relays are permanently blinking.

‘Forced off’ command received (Build 1105 or higher):
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 5 databytes received
    DATABYTE1 = COMMAND_FORCED_OFF (H’12’)
    DATABYTE2 = Relay bit number
                     Contents         Relay number
                 B’00000001’          Channel 1
                 B’00000010’          Channel 2
                 B’00000100’          Channel 3
                 B’00001000’          Channel 4
                 B’00010000’          Virtual channel 5
    DATABYTE3 = high byte of delay time
    DATABYTE4 = mid byte of delay time
    DATABYTE5 = low byte of delay time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero.
    When the time parameter contains H’FFFFFF’ then the relays are permanently forced off.

‘Cancel forced off’ command received (Build 1105 or higher):
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_CANCEL_FORCED_OFF (H’13’)
    DATABYTE2 = Relay bit number
                       Contents        Relay number
                   B’00000001’         Channel 1
                   B’00000010’         Channel 2
                   B’00000100’         Channel 3
                   B’00001000’         Channel 4
                   B’00010000’         Virtual channel 5




                                          VMB1RYNO PROTOCOL – edition 4                       8
‘Forced on’ command received (Build 1105 or higher):
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 5 databytes received
   DATABYTE1 = COMMAND_FORCED_ON (H’14’)
   DATABYTE2 = Relay bit number
                     Contents         Relay number
                 B’00000001’          Channel 1
                 B’00000010’          Channel 2
                 B’00000100’          Channel 3
                 B’00001000’          Channel 4
                 B’00010000’          Virtual channel 5
   DATABYTE3 = high byte of delay time
   DATABYTE4 = mid byte of delay time
   DATABYTE5 = low byte of delay time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero or the channels are already forced off.
    When the time parameter contains H’FFFFFF’ then the relays are permanently forced on.


‘Cancel forced on’ command received (Build 1105 or higher):
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_CANCEL_FORCED_ON (H’15’)
    DATABYTE2 = Relay bit number
                      Contents        Relay number
                  B’00000001’         Channel 1
                  B’00000010’         Channel 2
                  B’00000100’         Channel 3
                  B’00001000’         Channel 4
                  B’00010000’         Virtual channel 5

‘Inhibit’ command received (Build 1105 or higher):
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 databytes received
    DATABYTE1 = COMMAND_INHIBIT (H’16’)
    DATABYTE2 = Relay bit number
                      Contents         Relay number
                  B’00000001’          Channel 1
                  B’00000010’          Channel 2
                  B’00000100’          Channel 3
                  B’00001000’          Channel 4
                  B’00010000’          Virtual channel 5
    DATABYTE3 = high byte of delay time
    DATABYTE4 = mid byte of delay time
    DATABYTE5 = low byte of delay time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero or the channels are already forced off/on.
    When the time parameter contains H’FFFFFF’ then the relays are permanently inhibited.




                                           VMB1RYNO PROTOCOL – edition 4                                           9
‘Cancel inhibit’ command received (Build 1105 or higher):
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_CANCEL_INHIBIT (H’17’)
    DATABYTE2 = Relay bit number
                       Contents        Relay number
                   B’00000001’         Channel 1
                   B’00000010’         Channel 2
                   B’00000100’         Channel 3
                   B’00001000’         Channel 4
                   B’00010000’         Virtual channel 5

‘Relay status request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 databytes received
   DATABYTE1 = COMMAND_RELAY_STATUS_REQUEST (H’FA’)
   DATABYTE2 = Relay bit number
                       Contents       Relay number
                  B’00000001’         Channel 1
                  B’00000010’         Channel 2
                  B’00000100’         Channel 3
                  B’00001000’         Channel 4
                  B’00010000’         Virtual channel 5

‘Module type request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 1
   DLC3...DLC0 = 0 databytes received

‘Relay name request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 databytes received
    DATABYTE1 = COMMAND_RELAY_NAME_REQUEST (H’EF’)
    DATABYTE2 = Relay bit number
                      Contents        channel number
                  B’00000001’         Relay Channel 1
                  B’00000010’         Relay Channel 2
                  B’00000100’         Relay Channel 3
                  B’00001000’         Relay Channel 4
                  B’00010000’         Virtual relay channel 5

‘Read data from memory’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 3 databytes received
    DATABYTE1 = COMMAND_READ_DATA_FROM_MEMORY (H’FD’)
    DATABYTE2 = High memory address
                  High address        Memory bank
                     H’00’            For channel 1 data
                     H’01’            For channel 2 data
                     H’02’            For channel 3 data
                     H’03’            For channel 4 data
                     H’04’            For virtual channel 5 data
    DATABYTE3 = LOW memory address (H’00’...H’FF’)




                                          VMB1RYNO PROTOCOL – edition 4   10
‘Read data block from memory’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 3 databytes received
    DATABYTE1 = COMMAND_READ_MEMORY_BLOCK (H’C9’)
    DATABYTE2 = High memory address
    DATABYTE3 = LOW memory address

   Remark: Valid address range: H’0000’ to H’04FC’

‘Memory dump request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 1 databytes received
   DATABYTE1 = COMMAND_MEMORY_DUMP_REQUEST (H’CB’)

‘Write data to memory’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 databytes received
    DATABYTE1 = COMMAND_WRITE_DATA_TO_MEMORY (H’FC’)
    DATABYTE2 = High memory address
                  High address        Memory bank
                      H’00’           For channel 1 data
                      H’01’           For channel 2 data
                      H’02’           For channel 3 data
                      H’03’           For channel 4 data
                      H’04’           For virtual channel 5 data
    DATABYTE3 = LOW memory address (H’00’...H’FF’)
    DATABYTE4 = memory data to write

   Remark: Wait at least 10ms for sending a next command on the velbus.

‘Write memory block’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 databytes received
    DATABYTE1 = COMMAND_WRITE_MEMORY_BLOCK (H’CA’)
    DATABYTE2 = High memory address
    DATABYTE3 = LOW memory address
    DATABYTE4 = memory databyte1 to write
    DATABYTE5 = memory databyte2 to write
    DATABYTE6 = memory databyte3 to write
    DATABYTE7 = memory databyte4 to write

   Remark:
   Valid address range: H’0000’ to H’04FC’
   Wait for ‘memory data block’ feedback before sending a next command on the velbus.

‘Bus error counter status request’ command received: (Build 0647 or higher)
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 1 databytes to send
    DATABYTE1 = COMMAND_BUS_ERROR_CONTER_STATUS_REQUEST (H’D9’)




                                         VMB1RYNO PROTOCOL – edition 4                  11
‘Write module address & serial number’ command received:
    SID10-SID9 = 01 (firmware priority)
    SID8...SID1 = Current module address
    RTR = 0
    DLC3...DLC0 = 7 databytes received
    DATABYTE1 = COMMAND_WRITE_ADDR_SERIALNR (H’6A’)
    DATABYTE2 = VMB4RYNO_MODULE_TYPE (H’11’)
    DATABYTE3 = current high byte SERIAL NUMBER
    DATABYTE4 = current low byte SERIAL NUMBER
    DATABYTE5 = new module address
    DATABYTE6 = new high byte SERIAL NUMBER
    DATABYTE7 = new low byte SERIAL NUMBER




                                 VMB1RYNO PROTOCOL – edition 4   12
Memory map Build 1026:

   Address   Contents                                   Address   Contents
   H’0000’   Push button 1 module address               H’0001’   Push button 1 bit number
   H’0002’   Push button 1 action fo channel 1          H’0003’   Push button 1 first time parameter
   H’0004’   Push button 1 second time parameter        H’0005’   Push button 1 third time parameter
   H’0006’   Push button 2 module address               H’0007’   Push button 2 bit number
   H’0008’   Push button 2 action fo channel 1          H’0009’   Push button 2 first time parameter
   H’000A’   Push button 2 second time parameter        H’000B’   Push button 2 third time parameter
   ...       ...                                        ...       ...
   H’00E4’   Push button 39 module address              H’00E5’   Push button 39 bit number
   H’00E6’   Push button 39 action fo channel 1         H’00E7’   Push button 39 first time parameter
   H’00E8’   Push button 39 second time parameter       H’00E9’   Push button 39 third time parameter
   H’00EA’   Normal open or normal closed contact CH1   H’00EB’   Not used
   H’00EC’   Not used                                   H’00ED’   Not used
   H’00EE’   Not used                                   H’00EF’   Not used
   H’00F0’   Relay channel 1 name character 1           H’00F1’   Relay channel 1 name character 2
   ...       ...                                        ...       ...
   H’00FE’   Relay channel 1name character 15           H’00FF’   Relay channel 1 name character 16

   Address   Contents                                   Address   Contents
   H’0100’   Push button 1 module address               H’0101’   Push button 1 bit number
   H’0102’   Push button 1 action fo channel 2          H’0103’   Push button 1 first time parameter
   H’0104’   Push button 1 second time parameter        H’0105’   Push button 1 third time parameter
   H’0106’   Push button 2 module address               H’0107’   Push button 2 bit number
   H’0108’   Push button 2 action fo channel 2          H’0109’   Push button 2 first time parameter
   H’010A’   Push button 2 second time parameter        H’010B’   Push button 2 third time parameter
   ...       ...                                        ...       ...
   H’01E4’   Push button 39 module address              H’01E5’   Push button 39 bit number
   H’01E6’   Push button 39 action fo channel 2         H’01E7’   Push button 39 first time parameter
   H’01E8’   Push button 39 second time parameter       H’01E9’   Push button 39 third time parameter
   H’01EA’   Normal open or normal closed contact CH2   H’01EB’   Not used
   H’01EC’   Not used                                   H’01ED’   Not used
   H’01EE’   Not used                                   H’01EF’   Not used
   H’01F0’   Relay channel 2 name character 1           H’01F1’   Relay channel 2 name character 2
   ...       ...                                        ...       ...
   H’01FE’   Relay channel 2name character 15           H’01FF’   Relay channel 2 name character 16

   Address   Contents                                   Address   Contents
   H’0200’   Push button 1 module address               H’0201’   Push button 1 bit number
   H’0202’   Push button 1 action fo channel 3          H’0203’   Push button 1 first time parameter
   H’0204’   Push button 1 second time parameter        H’0205’   Push button 1 third time parameter
   H’0206’   Push button 2 module address               H’0207’   Push button 2 bit number
   H’0208’   Push button 2 action fo channel 3          H’0209’   Push button 2 first time parameter
   H’020A’   Push button 2 second time parameter        H’020B’   Push button 2 third time parameter
   ...       ...                                        ...       ...
   H’02E4’   Push button 39 module address              H’02E5’   Push button 39 bit number
   H’02E6’   Push button 39 action fo channel 3         H’02E7’   Push button 39 first time parameter
   H’02E8’   Push button 39 second time parameter       H’02E9’   Push button 39 third time parameter
   H’02EA’   Normal open or normal closed contact CH3   H’02EB’   Not used
   H’02EC’   Not used                                   H’02ED’   Not used
   H’02EE’   Not used                                   H’02EF’   Not used
   H’02F0’   Relay channel 3 name character 1           H’02F1’   Relay channel 3 name character 2
   ...       ...                                        ...       ...
   H’02FE’   Relay channel 3name character 15           H’02FF’   Relay channel 3 name character 16




                                       VMB1RYNO PROTOCOL – edition 4                                    13
      Address      Contents                                      Address   Contents
      H’0300’      Push button 1 module address                  H’0301’   Push button 1 bit number
      H’0302’      Push button 1 action fo channel 4             H’0303’   Push button 1 first time parameter
      H’0304’      Push button 1 second time parameter           H’0305’   Push button 1 third time parameter
      H’0306’      Push button 2 module address                  H’0307’   Push button 2 bit number
      H’0308’      Push button 2 action fo channel 4             H’0309’   Push button 2 first time parameter
      H’030A’      Push button 2 second time parameter           H’030B’   Push button 2 third time parameter
      ...          ...                                           ...       ...
      H’03E4’      Push button 39 module address                 H’03E5’   Push button 39 bit number
      H’03E6’      Push button 39 action fo channel 4            H’03E7’   Push button 39 first time parameter
      H’03E8’      Push button 39 second time parameter          H’03E9’   Push button 39 third time parameter
      H’03EA’      Normal open or normal closed contact CH4      H’03EB’   Not used
      H’03EC’      Not used                                      H’03ED’   Not used
      H’03EE’      Not used                                      H’03EF’   Not used
      H’03F0’      Relay channel 4 name character 1              H’03F1’   Relay channel 4 name character 2
      ...          ...                                           ...       ...
      H’03FE’      Relay channel 4name character 15              H’03FF’   Relay channel 4 name character 16



      Address      Contents                                      Address   Contents
      H’0400’      Push button 1 module address                  H’0401’   Push button 1 bit number
      H’0402’      Push button 1 action for virtual channel 5    H’0403’   Push button 1 first time parameter
      H’0404’      Push button 1 second time parameter           H’0405’   Push button 1 third time parameter
      H’0406’      Push button 2 module address                  H’0407’   Push button 2 bit number
      H’0408’      Push button 2 action for virtual channel 5    H’0409’   Push button 2 first time parameter
      H’040A’      Push button 2 second time parameter           H’040B’   Push button 2 third time parameter
      ...          ...                                           ...       ...
      H’04E4’      Push button 39 module address                 H’04E5’   Push button 39 bit number
      H’04E6’      Push button 39 action for virtual channel 5   H’04E7’   Push button 39 first time parameter
      H’04E8’      Push button 39 second time parameter          H’04E9’   Push button 39 third time parameter
      H’04EA’      Normal open or normal closed contact CH5      H’04EB’   Not used
      H’04EC’      Not used                                      H’04ED’   Not used
      H’04EE’      Not used                                      H’04EF’   Not used
      H’04EA’      Push button 40 module address                 H’04EB’   Push button 40 bit number
      H’04EC’      Push button 40 action for virtual channel 5   H’04ED’   Push button 40 first time parameter
      H’04EE’      Push button 40 second time parameter          H’04EF’   Push button 40 third time parameter
      H’04F0’      Virtual relay channel 5 name character 1      H’04F1’   Virtual relay channel 5 name character 2
      ...          ...                                           ...       ...
      H’04FE’      Virtual relay channel 5name character 15      H’04FF’   Virtual relay channel 5 name character 16

    Remark:
    Unused locations contain H’FF’

Normal open or normal closed contact:
        H’FF’ : normal open relay contact
        H’00’ : normal closed relay contact




                                               VMB1RYNO PROTOCOL – edition 4                                           14
Action   Description                                    First time parameter   Second time parameter   Third time parameter
H’00’    Momentary                                      H’FF’                  H’FF’                   H’FF’
H’01’    Off                                            H’FF’                  H’FF’                   H’FF’
H’02’    ‘Off’ with timers disabled                     H’FF’                  H’FF’                   H’FF’
H’03’    ‘Off’ with timers disabled at short press      H’FF’                  H’FF’                   H’FF’
H’04’    ‘Off’ with timers disabled at long press       H’FF’                  H’FF’                   H’FF’
H’05’    On                                             H’FF’                  H’FF’                   H’FF’
H’06’    ‘On’ with timers disabled                      H’FF’                  H’FF’                   H’FF’
H’07’    ‘On’ with timers disabled at short press       H’FF’                  H’FF’                   H’FF’
H’08’    ‘On’ with timers disabled at long press        H’FF’                  H’FF’                   H’FF’
H’09’    Toggle                                         H’FF’                  H’FF’                   H’FF’
H’0A’    ‘Toggle’ with timers disabled                  H’FF’                  H’FF’                   H’FF’
H’0B’    ‘Toggle’ with timers disabled at short press   H’FF’                  H’FF’                   H’FF’
H’0C’    ‘Toggle’ with timers disabled at long press    H’FF’                  H’FF’                   H’FF’
H’0D’    Start/stop timer                               Time1 at short press   Time2 at long press     H’FF’
H’0E’    Restartable timer                              Time1 at short press   Time2 at long press     H’FF’
H’0F’    Non retriggerable timer                        Time                   H’FF’                   H’FF’
H’10’    Trigger on release timer                       Time                   H’FF’                   H’FF’
H’11’    ‘On’ at press, delayed ‘Off’ at release        Delayed ‘Off’ time     H’FF’                   H’FF’
H’12’    Delayed ‘Off’ only when relay is on            Delayed ‘Off’ time     H’FF’                   H’FF’
H’13’    Start/stop delayed ‘On’                        Delayed ‘On’ time      Timeout                 H’FF’
H’14’    Restartable delayed ‘On’                       Delayed ‘On’ time      Timeout                 H’FF’
H’15’    Non restartable delayed ‘On’                   Delayed ‘On’ time      Timeout                 H’FF’
H’16’    Start/Stop interval timer                      Timeout                Pulse time              Pauze time
H’17’    Restartable interval timer                     Timeout                Pulse time              Pauze time
H’18’    Non restartable interval timer                 Timeout                Pulse time              Pauze time
H’19’    Disable at closed switch                       H’FF’                  H’FF’                   H’FF’
H’1A’    Disable at opened switch                       H’FF’                  H’FF’                   H’FF’
H’1B’    Disable at pressing push button                Timeout                H’FF’                   H’FF’
H’1C’    Toggle disable at pressing push button         Timeout                H’FF’                   H’FF’
H’1D’    Cancel disable at pressing push button         H’FF’                  H’FF’                   H’FF’
H’1E’    Forced ‘On’ at closed switch                   H’FF’                  H’FF’                   H’FF’
H’1F’    Forced ‘On’ at opened switch                   H’FF’                  H’FF’                   H’FF’
H’20’    Forced ‘On’ at pressing push button            Timeout                H’FF’                   H’FF’
H’21’    Toggle forced ‘On’ at pressing push button     Timeout                H’FF’                   H’FF’
H’22’    Cancel Forced ‘On’ at pressing push button     H’FF’                  H’FF’                   H’FF’
H’23’    Inhibit at closed switch                       H’FF’                  H’FF’                   H’FF’
H’24’    Inhibit at opened switch                       H’FF’                  H’FF’                   H’FF’
H’25’    Inhibit at pressing push button                Timeout                H’FF’                   H’FF’
H’26’    Toggle inhibit at pressing push button         Timeout                H’FF’                   H’FF’
H’27’    Cancel inhibit at pressing push button         H’FF’                  H’FF’                   H’FF’




                                               VMB1RYNO PROTOCOL – edition 4                                            15
Time parameter   Time
0                No timer
1                1s
2                2s
...
119              1min59s
120              2min
121              2min15s
...
131              4min45s
132              5min
133              5min30s
...
181              29min30s
182              30min
183              31min
...
211              59min
212              1h
213              1h15min
...
227              4h45min
228              5h
229              5h30min
...
237              9h30min
238              10h
239              11h
...
251              23h
252              1d
253              2d
254              3d
255              infinite




                            VMB1RYNO PROTOCOL – edition 4   16
