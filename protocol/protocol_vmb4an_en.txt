VMB4AN
Analog I/O module
for VELBUS system




    VMB4AN PROTOCOL – edition 3   1
Binairy format:

<SOF-SID10...SID0-RTR-IDE-r0-DLC3...0-DATABYTE1...DATABYTEn-CRC15...CRC1-CRCDEL-ACK-ACKDEL-
EOF7...EOF1-IFS3...IFS1>
  bits                          Description
  SOF                           Start Of Frame (always 0)
  SID10 & SID9                  Priority (00: highest … 11: lowest priority)
  SID8…SID1                     Address
  SID0                          Always 0
  RTR                           Remote Transmit Request
  IDE                           Identifier Extension (always 0)
  r0                            reserved (always 0)
  DLC3…DLC0                     Data Length Code (0…8)
  Databyte1                     Command
  Databyte2                     Parameter
  Databyte3                     Parameter
  Databyte4                     Parameter
  Databyte5                     Parameter
  Databyte6                     Parameter
  Databyte7                     Parameter
  Databyte8                     Parameter
  CRC15…CRC1                    Cyclic Redundancy Checksum
  CRCDEL                        CRC Delimiter (always 1)
  ACK                           Acknowledge slot (transmit 1 readback 0 if received correctly)
  ACKDEL                        Acknowledge Delimiter (always 1)
  EOF7...EOF1                   End Of Frame (always 1111111)
  IFS3...IFS1                   InterFrame Space (always 111)

The module can transmit the following messages:
  Module type and subtype
  Bus error counter status
  Real-time clock status
  Date status
  Daylight savings status
  Power up
  Memory data
  Memory data block (4 bytes)

The module can transmit the following commands:
  Real-time clock status request

The module can receive the following messages:
  Power up
  Module type request
  Bus error counter status request
  Real-time clock status request
  Set real-time clock
  Set date
  Set daylight savings
  Enable/disable global sunrise/sunset related actions
  Enable/disable local sunrise/sunset related actions
  Set local alarm clock
  Set global alarm clock
  Read memory data
  Read memory data block (4 bytes)
  Memory dump request
  Write memory data
  Write memory data block (4 bytes)
 




                                              VMB4AN PROTOCOL – edition 3                        2
Transmits power up message:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 2 data byte to send
    DATABYTE1 = COMMAND_POWER_UP (0xAB)
    DATABYTE2 = module address

Transmits real time clock status request:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 1 data byte to send
    DATABYTE1 = COMMAND_REALTIME_CLOCK_STATUS_REQUEST (0xD7)

Transmits the real time clock status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_REALTIME_CLOCK_STATUS (0xD8)
    DATABYTE2 = Day
                         Contents     Day
                            0         Monday
                            1         Tuesday
                            2         Wednesday
                            3         Thursday
                            4         Friday
                            5         Saturday
                            6         Sunday
    DATABYTE3 = Hour (0…23)
    DATABYTE4 = Minute (0…59)

Transmits the date status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes to send
    DATABYTE1 = COMMAND_DATE_STATUS (0xB7)
    DATABYTE2 = Day (1…31)
    DATABYTE3 = Month (1…12)
    DATABYTE4 = High byte of Year
    DATABYTE5 = Low byte of Year

Transmits the daylight savings status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_DAYLIGHT_SAVING_STATUS (0xAF)
    DATABYTE2 = 0 =disabled / 1 = enabled

Transmits the module type:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 data bytes to send
    DATABYTE1 = COMMAND_MODULE_TYPE (0xFF)
    DATABYTE2 = VMB4AN type (0x32)
    DATABYTE3 = High byte of serial number
    DATABYTE4 = Low byte of serial number
    DATABYTE5 = Memory map version
    DATABYTE6 = Build year
    DATABYTE7 = Build week




                               VMB4AN PROTOCOL – edition 3     3
Transmits the module subtype:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_SUBTYPE (0xB0)
    DATABYTE2 = VMB4AN type (0x32)
    DATABYTE3 = High byte of serial number
    DATABYTE4 = Low byte of serial number
    DATABYTE5 = Subaddress1 (H’FF’ sub-address disabled)
    DATABYTE6 = Subaddress2 (H’FF’ sub-address disabled)
    DATABYTE7 = Subaddress3 (H’FF’ sub-address disabled)
    DATABYTE8 = Subaddress4 (H’FF’ sub-address disabled)

Transmits bus error counter status
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_BUSERROR_COUNTER_STATUS (0xDA)
    DATABYTE2 = Transmit error counter
    DATABYTE3 = Receive error counter
    DATABYTE4 = Bus off counter

Transmits the memory data:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_MEMORY_DATA (0xFE)
    DATABYTE2 = High memory address
    DATABYTE3 = LOW memory address
    DATABYTE4 = memory data

   Remark:
   address range: 0x0000 to 0x0B3F = memory map

Transmits memory data block (4 bytes):
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 data bytes to send
    DATABYTE1 = COMMAND_MEMORY_DATA_BLOCK (0xCC)
    DATABYTE2 = High start address of memory block
    DATABYTE3 = LOW start address of memory block
    DATABYTE4 = memory data1
    DATABYTE5 = memory data2
    DATABYTE6 = memory data3
    DATABYTE7 = memory data4

   Remark:
   address range: 0x0000 to 0x0B3C = memory map
                  0x1000 to 0x13FC = eeprom data




                                        VMB4AN PROTOCOL – edition 3   4
Transmits the first part of the channel name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_NAME_PART1 (0xF0)
    DATABYTE2 = channel
                         Contents        channel
                           1             Alarm output1
                           2             Alarm output 2
                           3             Alarm output 3
                           4             Alarm output 4
                           5             Alarm output 5
                           6             Alarm output 6
                           7             Alarm output 7
                           8             Alarm output 8
                           9             Sensor 1
                          10             Sensor 2
                          11             Sensor 3
                          12             Sensor 4
                          13             Analog output 1
                          14             Analog output 2
                          15             Analog output 3
                          16             Analog output 4
    DATABYTE3 = Character 1 of the name
    DATABYTE4 = Character 2 of the name
    DATABYTE5 = Character 3 of the name
    DATABYTE6 = Character 4 of the name
    DATABYTE7 = Character 5 of the name
    DATABYTE8 = Character 6 of the name

Transmits the second part of the channel name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the module
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_NAME_PART2 (0xF1)
    DATABYTE2 = channel
                       Contents         Channel
                         1              Alarm output 1
                         2              Alarm output 2
                         3              Alarm output 3
                         4              Alarm output 4
                         5              Alarm output 5
                         6              Alarm output 6
                         7              Alarm output 7
                         8              Alarm output 8
                         9              Sensor 1
                        10              Sensor 2
                        11              Sensor 3
                        12              Sensor 4
                        13              Analog output 1
                        14              Analog output 2
                        15              Analog output 3
                        16              Analog output 4
    DATABYTE3 = Character 7 of the name
    DATABYTE4 = Character 8 of the name
    DATABYTE5 = Character 9 of the name
    DATABYTE6 = Character 10 of the name
    DATABYTE7 = Character 11 of the name
    DATABYTE8 = Character 12 of the name




                                           VMB4AN PROTOCOL – edition 3   5
Transmits the third part of the channel name:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the module
    RTR = 0
    DLC3...DLC0 = 6 data bytes to send
    DATABYTE1 = COMMAND_DIMMER_NAME_PART3 (0xF2)
    DATABYTE2 = channel
                        Contents         Channel
                          1              Alarm output 1
                          2              Alarm output 2
                          3              Alarm output 3
                          4              Alarm output 4
                          5              Alarm output 5
                          6              Alarm output 6
                          7              Alarm output 7
                          8              Alarm output 8
                          9              Sensor 1
                         10              Sensor 2
                         11              Sensor 3
                         12              Sensor 4
                         13              Analog output 1
                         14              Analog output 2
                         15              Analog output 3
                         16              Analog output 4
    DATABYTE3 = Character 13 of the name
    DATABYTE4 = Character 14 of the name
    DATABYTE5 = Character 15 of the name
    DATABYTE6 = Character 16 of the name

Transmits clears LEDs on a linked push button:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the linked push button module for clearing LEDs
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_CLEAR_LED (0xF5)
    DATABYTE2 = LED bit numbers (1 = clear LED)

Transmits sets LEDs on a linked push button:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the linked push button module for setting LEDs on
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_SET_LED (0xF6)
    DATABYTE2 = LED bit numbers (1 = set LED)

Transmits blinks LEDs slowly on a linked push button:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the linked push button module for slowly blinking LEDs
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_SLOW_BLINKING_LED (0xF7)
    DATABYTE2 = LED bit numbers (1 = slow blink LED)

Transmits blinks LEDs fast on a linked push button module:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the linked push button module for fast blinking LEDs
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_FAST_BLINKING_LED (0xF8)
    DATABYTE2 = LED bit numbers (1 = fast blink LED)




                                            VMB4AN PROTOCOL – edition 3               6
Transmits program step info:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_PROGRAM_STEP_INFO (0xC1)
    DATABYTE2 = Program step number (1…85 / 255 step not found)
    DATABYTE3 = Program reference
                          Contents     Description
                          000xxxxx     Disable program step
                          001xxxxx     Absolute time
                          010xxxxx     Wake up time 1 + relative time
                          011xxxxx     Go to bed time 1 + relative time
                          100xxxxx     Wake up time 2 + relative time
                          101xxxxx     Go to bed time 2 + relative time
                          110xxxxx     Sunrise + relative time
                          111xxxxx     Sunset + relative time
                          xxx01111     Rel. time = 3h45min
                             …
                          xxx00001     Rel. time = 15min
                          xxx00000     Rel. time = 0
                          xxx11111     Rel. time = -15min
                             …
                          xxx10000     Rel. time = -4h
    DATABYTE4 = Program step month & four least significant bits of day
                          Contents                          Description
                          xxxx0000     Weekly program
                          xxxx0001     January
                          xxxx0010     February
                          xxxx0011     March
                          xxxx0100     April
                          xxxx0101     May
                          xxxx0110     June
                          xxxx0111     July
                          xxxx1000     August
                          xxxx1001     September
                          xxxx1010     October
                          xxxx1011     November
                          xxxx1100     December
                          xxxx1101     Monthly program
                          xxxx1110     Monthly program
                          xxxx1111     Monthly program
                      Contents byte6     Contents byte4      Description
                          00xxxxxx          0000xxxx         Never
                          00xxxxxx          0001xxxx         Day 1of the month
                          00xxxxxx          0010xxxx         Day 2of the month
                             …                 ...           …
                          01xxxxxx          1111xxxx         Day 31of the month
                          10xxxxxx          0000xxxx         Never
                          10xxxxxx          0001xxxx         Every Monday
                          10xxxxxx          0010xxxx         Every Tuesday
                             ...               …             …
                          10xxxxxx          0111xxxx         Every Sunday
                          10xxxxxx          1000xxxx         Every weekend (sa & su)
                          10xxxxxx          1001xxxx         Every working day (mo…fr)
                          10xxxxxx          1010xxxx         Every day except Sunday
                          10xxxxxx          1011xxxx         Every day
                          10xxxxxx          1100xxxx         Never
                             …                 …             …
                          11xxxxxx          1111xxxx         Never




                                          VMB4AN PROTOCOL – edition 3                    7
DATABYTE5 = Program step hour & group number
                  Contents      Description
                 xxx00000       0h
                 xxx00001       1h
                    …           …
                 xxx10111       23h
                 xx1xxxxx       Program group 1 (ex. Summer program)
                 x1xxxxxx       Program group 2 (ex. Winter program)
                 1xxxxxxx       Program group 3 (ex. Holiday program)
DATABYTE6 = Program step minute & every flag & msb of day
                  Contents      Description
                 xx000000       0min
                 xx000001       1min
                    …           …
                 xx111011       59min

               Contents byte6      Contents byte4      Description
                 00xxxxxx            0000xxxx          Never
                 00xxxxxx            0001xxxx          Day 1of the month
                 00xxxxxx            0010xxxx          Day 2of the month
                    …                   ...            …
                 01xxxxxx            1111xxxx          Day 31of the month
                 10xxxxxx            0000xxxx          Never
                 10xxxxxx            0001xxxx          Every Monday
                 10xxxxxx            0010xxxx          Every Tuesday
                     ...                …              …
                 10xxxxxx            0111xxxx          Every Sunday
                 10xxxxxx            1000xxxx          Every weekend (sa & su)
                 10xxxxxx            1001xxxx          Every working day (mo…fr)
                 10xxxxxx            1010xxxx          Every day except Sunday
                 10xxxxxx            1011xxxx          Every day
                 10xxxxxx            1100xxxx          Never
                    …                   …              …
                 11xxxxxx            1111xxxx          Never
DATABYTE7 = Program step action
                  Contents        Action
                      0           Unlock
                      1           Lock
                      2           Sensor preset 1 (safe) mode
                      3           Sensor preset 2 (night) mode
                      4           Sensor preset 3 (day) mode
                      5           Sensor preset 4 (comfort) mode
DATABYTE8 = Channel
                  Contents        Channel
                     1               Alarm output 1
                     2               Alarm output 2
                     3               Alarm output 3
                     4               Alarm output 4
                     5               Alarm output 5
                     6               Alarm output 6
                     7               Alarm output 7
                     8               Alarm output 8
                     9               Sensor 1
                    10               Sensor 2
                    11               Sensor 3
                    12               Sensor 4
                    13               Analog output 1
                    14               Analog output 2
                    15               Analog output 3
                    16               Analog output 4




                                    VMB4AN PROTOCOL – edition 3                    8
Transmits the alarm output switch status:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_PUSH_BUTTON_STATUS (0x00)
    DATABYTE2 = Alarm channel just pressed
    DATABYTE3 = Alarm channel just released
    DATABYTE4 = Alarm channel long pressed
                       Contents           Alarm output number
                     B’00000001’          Alarm output 1
                     B’00000010’          Alarm output 2
                     B’00000100’          Alarm output 3
                     B’00001000’          Alarm output 4
                     B’00010000’          Alarm output 5
                     B’00100000’          Alarm output 6
                     B’01000000’          Alarm output 7
                     B’10000000’          Alarm output 8

Transmits the alarm output status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 6 data bytes to send
    DATABYTE1 = COMMAND_MODULE_STATUS (0xED)
    DATABYTE2 = alarm output status (1 = pressed / 0 = released)
                      Contents          Alarm output status
                     B’xxxxxxx0’         Alarm output 1 off
                     B’xxxxxxx1’         Alarm output 1 on
                     B’xxxxxx0x’         Alarm output 2 off
                     B’xxxxxx1x’         Alarm output 2 on
                     B’xxxxx0xx’         Alarm output 3 off
                     B’xxxxx1xx’         Alarm output 3 on
                     B’xxxx0xxx’         Alarm output 4 off
                     B’xxxx1xxx’         Alarm output 4 on
                     B’xxx0xxxx’         Alarm output 5 off
                     B’xxx1xxxx’         Alarm output 5 on
                     B’xx0xxxxx’         Alarm output 6 off
                     B’xx1xxxxx’         Alarm output 6 on
                     B’x0xxxxxx’         Alarm output 7 off
                     B’x1xxxxxx’         Alarm output 7 on
                     B’0xxxxxxx’         Alarm output 8 off
                     B’1xxxxxxx’         Alarm output 8 on
    DATABYTE3 = locked alarm output status (0 = unlocked / 1 = locked)
                      Contents          Locked/unlocked alarm output status
                     B’xxxxxxx0’         Alarm output 1 unlocked
                     B’xxxxxxx1’         Alarm output 1 locked
                     B’xxxxxx0x’         Alarm output 2 unlocked
                     B’xxxxxx1x’         Alarm output 2 locked
                     B’xxxxx0xx’         Alarm output 3 unlocked
                     B’xxxxx1xx’         Alarm output 3 locked
                     B’xxxx0xxx’         Alarm output 4 unlocked
                     B’xxxx1xxx’         Alarm output 4 locked
                     B’xxx0xxxx’         Alarm output 5 unlocked
                     B’xxx1xxxx’         Alarm output 5 locked
                     B’xx0xxxxx’         Alarm output 6 unlocked
                     B’xx1xxxxx’         Alarm output 6 locked
                     B’x0xxxxxx’         Alarm output 7 unlocked
                     B’x1xxxxxx’         Alarm output 7 locked
                     B’0xxxxxxx’         Alarm output 8 unlocked
                     B’1xxxxxxx’         Alarm output 8 locked




                                         VMB4AN PROTOCOL – edition 3          9
DATABYTE4 = disabled alarm output program (0 = program enabled / 1 = program disabled)
               Contents             Alarm output program enabled/disabled
             B’xxxxxxx0’            Alarm output 1 program enabled
             B’xxxxxxx1’            Alarm output 1 program disabled
             B’xxxxxx0x’            Alarm output 2 program enabled
             B’xxxxxx1x’            Alarm output 2 program disabled
             B’xxxxx0xx’            Alarm output 3 program enabled
             B’xxxxx1xx’            Alarm output 3 program disabled
             B’xxxx0xxx’            Alarm output 4 program enabled
             B’xxxx1xxx’            Alarm output 4 program disabled
             B’xxx0xxxx’            Alarm output 5 program enabled
             B’xxx1xxxx’            Alarm output 5 program disabled
             B’xx0xxxxx’            Alarm output 6 program enabled
             B’xx1xxxxx’            Alarm output 6 program disabled
             B’x0xxxxxx’            Alarm output 7 program enabled
             B’x1xxxxxx’            Alarm output 7 program disabled
             B’0xxxxxxx’            Alarm output 8 program enabled
             B’1xxxxxxx’            Alarm output 8 program disabled

DATABYTE5 = clock alarm & program selection
               Contents        Clock alarm/Selected program
          B’xxxxxx00’          None
          B’xxxxxx01’          Program group 1 selected
          B’xxxxxx10’          Program group 2 selected
          B’xxxxxx11’          Program group 3 selected
          B’xxxxx0xx’          Clock alarm 1 off
          B’xxxxx1xx’          Clock alarm 1 on
          B’xxxx0xxx’          Local clock alarm 1
          B’xxxx1xxx’          Global clock alarm 1
          B’xxx0xxxx’          Clock alarm 2 off
          B’xxx1xxxx’          Clock alarm 2 on
          B’xx0xxxxx’          Local clock alarm 2
          B’xx1xxxxx’          Global clock alarm 2
          B’x0xxxxxx’          Sunrise disabled
          B’x1xxxxxx’          Sunrise enabled
          B’0xxxxxxx’          Sunset disabled
          B’1xxxxxxx’          Sunset enabled
DATABYTE6 = test modus
               Contents           Test modus
             B’0xxxxxxx’           Test modus inactive
             B’1xxxxxxx’           Test modus active




                                      VMB4AN PROTOCOL – edition 3                        10
Transmit the sensor raw value:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 6 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_RAW_DATA (0xA9)
    DATABYTE2 = channel
                      Contents          Channel
                          9             Sensor 1
                         10             Sensor 2
                         11             Sensor 3
                         12             Sensor 4
    DATABYTE3 = Operating mode
                  Contents          Sensor mode
                  xxxxxx00          Voltage (0…10 V) sensor type
                  xxxxxx01          Current (4…20 mA) sensor type
                  xxxxxx10          Resistance (PT100/PT1000/Ni1000) sensor type
                  xxxxxx11          Period measurement sensor type
    DATABYTE4 = Upper byte of sensor value
    DATABYTE5 = High byte of sensor value
    DATABYTE6 = Low byte of sensor value

    Remark: Resolution of the 16-bit sensor value
                  Sensor mode                                            Resolution
                  Voltage (0…10 V) sensor type                           0.25 mV
                  Current (4…20 mA) sensor type                          5 µA
                  Resistance (PT100/PT1000/Ni1000) sensor type           0.25 Ohm
                  Period measurement sensor type                         0.5 µs
            If the Period = 0x000000 then the input is short circuited
            If the Period = 0xFFFFFF then the input is left open

Transmit the sensor value as a text string:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = number of data bytes to send
    DATABYTE1 = COMMAND_TEXT (0xAC)
    DATABYTE2 = channel
                      Contents             Channel
                          9                Sensor 1
                         10                Sensor 2
                         11                Sensor 3
                         12                Sensor 4
    DATABYTE3 = text start position
    DATABYTE4 = character 1
    DATABYTE5 = character 2
    DATABYTE6 = character 3
    DATABYTE7 = character 4
    DATABYTE8 = character 5

    Remark:
    valid text start position: 0…15
    maximum 15 characters are allowed
    shorter text stings must be ended with a zero value




                                              VMB4AN PROTOCOL – edition 3             11
Transmits the sensor status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 databytes to send
    DATABYTE1 = COMMAND_SENSOR_STATUS (0xEA)
    DATABYTE2 = channel
                      Contents           Channel
                          9              Sensor 1
                         10              Sensor 2
                         11              Sensor 3
                         12              Sensor 4
    DATABYTE3 = Operating mode
                  Contents           Operating mode
                  xxxxxx00           Voltage (0…10 V) sensor type
                  xxxxxx01           Current (4…20 mA) sensor type
                  xxxxxx10           Resistance (PT100/PT1000/Ni1000) sensor type
                  xxxxxx11           Period measurement sensor type
                  xxxx00xx           Manual operating
                  xxxx01xx           Run sensor program
                  xxxx10xx           Temporarily operating
                  xxxx11xx           Reserved
                  xx00xxxx           Sensor preset 1 (safe) mode
                  xx01xxxx           Sensor preset 2 (night) mode
                  xx10xxxx           Sensor preset 3 (day) mode
                  xx11xxxx           Sensor preset 4 (comfort) mode
                  x0xxxxxxx          Sensor mode unlocked
                  x1xxxxxxx          Sensor mode locked
                  0xxxxxxx           Sensor program enabled
                  1xxxxxxx           Sensor program disabled
    DATABYTE4 = Sleep time high byte
    DATABYTE5 = Sleep time low byte
    DATABYTE6 = auto send sensor value
                      (0 = no change auto send interval)
                      (1…4 = auto send disabled)
                      (5 = auto send when raw data changed with minimum interval time)
                      (6 = auto send when raw data 3.125% changed with minimum interval time)
                      (7 = auto send when raw data 6.25% changed with minimum interval time)
                      (8 = auto send when raw data 12.5% changed with minimum interval time)
                      (9 = auto send when raw data 25% changed with minimum interval time)
                      (10…255s = fixed interval)
    DATABYTE7 = minimum interval time when sensor value changed into seconds (0…255s)




                                           VMB4AN PROTOCOL – edition 3                          12
Transmit the first part of the sensor settings:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_SETTINGS_PART1 (0xE8)
    DATABYTE2 = channel
                        Contents            Channel
                            9               Sensor 1
                           10               Sensor 2
                           11               Sensor 3
                           12               Sensor 4
    DATABYTE3 = Sensor current preset upper byte
    DATABYTE4 = Sensor current preset high byte
    DATABYTE5 = Sensor current preset low byte
    DATABYTE6 = Sensor preset 1 upper byte
    DATABYTE7 = Sensor preset 1 high byte
    DATABYTE8 = Sensor preset 1 low byte

Transmit the second part of the sensor settings:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_SETTINGS_PART2 (0xE9)
    DATABYTE2 = channel
                     Contents             Channel
                          9               Sensor 1
                         10               Sensor 2
                         11               Sensor 3
                         12               Sensor 4
    DATABYTE3 = Sensor preset 2 upper byte
    DATABYTE4 = Sensor preset 2 high byte
    DATABYTE5 = Sensor preset 2 low byte
    DATABYTE6 = Sensor preset 3 upper byte
    DATABYTE7 = Sensor preset 3 high byte
    DATABYTE8 = Sensor preset 3 low byte

Transmit the third part of the sensor settings:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_SETTINGS_PART3 (0xC6)
    DATABYTE2 = channel
                      Contents              Channel
                           9                Sensor 1
                          10                Sensor 2
                          11                Sensor 3
                          12                Sensor 4
    DATABYTE3 = Sensor preset 4 upper byte
    DATABYTE4 = Sensor preset 4 high byte
    DATABYTE5 = Sensor preset 4 low byte
    DATABYTE6 = Sensor offset high byte
    DATABYTE7 = Sensor offset low byte




                                VMB4AN PROTOCOL – edition 3   13
Transmit the fourth part of the sensor settings:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_SETTINGS_PART4 (0xB9)
    DATABYTE2 = channel
                      Contents             Channel
                          9                Sensor 1
                         10                Sensor 2
                         11                Sensor 3
                         12                Sensor 4
    DATABYTE3 = Sensor default sleep time high byte
    DATABYTE4 = Sensor default sleep time low byte

Transmits the analog output channel status:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_ANALOG_OUT_STATUS (0xB8)
    DATABYTE2 = channel
                     Contents          Channel
                       13              Analog output 1
                       14              Analog output 2
                       15              Analog output 3
                       16              Analog output 4
    DATABYTE3 = inhibit/forced on/locked/program disabled setting
                     Contents          Setting
                   B’xxxxx000’         Channel normal
                   B’xxxxx001’         Channel inhibited
                   B’xxxxx01x’         Channel forced on
                   B’xxxxx1xx’         Channel locked
                   B’xxxx0xxx’         Channel program enabled
                   B’xxxx1xxx’         Channel program disabled
    DATABYTE4 = Analog out value high byte
    DATABYTE5 = Analog out value low byte
    DATABYTE6 = upper byte of current timeout
    DATABYTE7 = high byte of current timeout
    DATABYTE8 = low byte of current timeout

    Remark: [DATABYTE5][DATABYTE6][DATABYTE7] contain a 24-bit time in seconds




                                          VMB4AN PROTOCOL – edition 3            14
‘Power up message’ received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 2 data byte to send
    DATABYTE1 = COMMAND_POWER_UP (0xAB)
    DATABYTE2 = module address

‘Real time clock request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 1
    DLC3...DLC0 = 1 data bytes received
    DATABYTE1 = COMMAND_REALTIME_CLOCK_REQUEST (0xD7)

‘Local Real time clock request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 1
    DLC3...DLC0 = 1 data bytes received
    DATABYTE1 = COMMAND_REALTIME_CLOCK_REQUEST (0xD7)

‘Set real time clock’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 4 data bytes to send
    DATABYTE1 = COMMAND_SET_REALTIME_CLOCK (0xD8)
    DATABYTE2 = Day of week
                 Contents day of week’  Description
                        H’00’           Monday
                        H’01’           Tuesday
                        H’02’           Wednesday
                        H’03’           Thursday
                        H’04’           Friday
                        H’05’           Saterday
                        H’06’           Sunday
    DATABYTE3 = Hours (0…23)
    DATABYTE4 = Minutes (0…59)

‘Set date’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = 0x00
     RTR = 0
     DLC3...DLC0 = 5 data bytes to send
     DATABYTE1 = COMMAND_SET_REALTIME_DATE (0xB7)
     DATABYTE2 = Day (1…31)
     DATABYTE3 = Month (1…12)
     DATABYTE4 = High byte of Year
     DATABYTE5 = Low byte of Year

‘Set daylight savings’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = 0x00
     RTR = 0
     DLC3...DLC0 = 2 data bytes to send
     DATABYTE1 = COMMAND_SET_DAYLIGHT_SAVING (0xAF)
     DATABYTE2 = 0 =disabled / 1 = enabled




                                VMB4AN PROTOCOL – edition 3   15
‘Enable/disable global sunrise/sunset related actions’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 3 data bytes to send
    DATABYTE1 = COMMAND_ENA_DIS_SUNRISE_SUNSET (0xAE)
    DATABYTE2 = Channel (FF)
    DATABYTE3 = Enable/disable flags
                       Contents              Description
                    B’xxxxxxx0’              Disable sunrise related actions
                    B’xxxxxxx1’              Enable sunrise related actions
                    B’xxxxxx0x’              Disable sunset related actions
                    B’xxxxxx1x’              Enable sunset related actions

‘Enable/disable local sunrise/sunset related actions’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 3 data bytes to send
    DATABYTE1 = COMMAND_ENA_DIS_SUNRISE_SUNSET (0xAE)
    DATABYTE2 = Channel (FF)
    DATABYTE3 = Enable/disable flags
                       Contents               Description
                     B’xxxxxxx0’              Disable sunrise related actions
                     B’xxxxxxx1’              Enable sunrise related actions
                     B’xxxxxx0x’              Disable sunset related actions
                     B’xxxxxx1x’              Enable sunset related actions


‘Set global clock alarm’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = 0x00
    RTR = 0
    DLC3...DLC0 = 7 data bytes to send
    DATABYTE1 = COMMAND_SET_ALARM_CLOCK (0xC3)
    DATABYTE2 = Alarm number (1 or 2)
    DATABYTE3 = Wake up hour (0…23)
    DATABYTE4 = Wake up minute (0…59)
    DATABYTE5 = Go to bed hour (0…23)
    DATABYTE6 = Go to bed minute (0…59)
    DATABYTE7 = Clock alarm enable flag (0 = disabled / 1 = enabled)

‘Set local clock alarm’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 7 data bytes to send
     DATABYTE1 = COMMAND_SET_ALARM_CLOCK (0xC3)
     DATABYTE2 = Alarm number (1 or 2)
     DATABYTE3 = Wake up hour (0…23)
     DATABYTE4 = Wake up minute (0…59)
     DATABYTE5 = Go to bed hour (0…23)
     DATABYTE6 = Go to bed minute (0…59)
     DATABYTE7 = Clock alarm enable flag (0 = disabled / 1 = enabled)

‘Module type request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 1
   DLC3...DLC0 = 0 data bytes received




                                              VMB4AN PROTOCOL – edition 3       16
‘Bus error counter status request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 1 data bytes to send
   DATABYTE1 = COMMAND_BUS_ERROR_COUNTER_STATUS_REQUEST (0xD9)

‘Read data from memory’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 3 data bytes received
    DATABYTE1 = COMMAND_READ_DATA_FROM_MEMORY (0xFD)
    DATABYTE2 = High memory address
    DATABYTE3 = Low memory address

  Remark: address range: 0x0000 to 0x03BF

‘Read data block from memory’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 3 data bytes received
   DATABYTE1 = COMMAND_READ_MEMORY_BLOCK (0xC9)
   DATABYTE2 = High memory address
   DATABYTE3 = Low memory address

  Remark: address range: 0x0000 to 0x03BC

‘Memory dump request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 1 data bytes received
   DATABYTE1 = COMMAND_MEMORY_DUMP_REQUEST (0xCB)

‘EEprom dump request’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 3 data bytes received
   DATABYTE1 = COMMAND_MEMORY_DUMP_REQUEST (0xCB)
   DATABYTE2 = don’t care
   DATABYTE3 = don’t care

‘Write data to memory’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_WRITE_DATA_TO_MEMORY (0xFC)
    DATABYTE2 = High memory address
    DATABYTE3 = Low memory address
    DATABYTE4 = Memory data to write
  Remark:
  Wait for ‘data memory byte’ feedback before sending a next command on the velbus.
  Address range: 0x0000 to 0x03BF
  Terminate always with a write command at the last memory location .




                                         VMB4AN PROTOCOL – edition 3                  17
‘Write memory block’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 7 data bytes received
    DATABYTE1 = COMMAND_WRITE_MEMORY_BLOCK (0xCA)
    DATABYTE2 = High memory address
    DATABYTE3 = LOW memory address
    DATABYTE4 = memory databyte1 to write
    DATABYTE5 = memory databyte2 to write
    DATABYTE6 = memory databyte3 to write
    DATABYTE7 = memory databyte4 to write

   Remark:
   Wait for ‘memory data block’ feedback before sending a next command on the velbus.
   Address range: 0x0000 to 0x03BC
   Terminate always with a write command at the last memory location .

‘Channel name request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_NAME_REQUEST (0xEF)
    DATABYTE2 = Channel
                      Contents        Channel
                        1             Alarm output 1
                        2             Alarm output 2
                        3             Alarm output 3
                        4             Alarm output 4
                        5             Alarm output 5
                        6             Alarm output 6
                        7             Alarm output 7
                        8             Alarm output 8
                        9             Sensor 1
                       10             Sensor 2
                       11             Sensor 3
                       12             Sensor 4
                       13             Analog output 1
                       14             Analog output 2
                       15             Analog output 3
                       16             Analog output 4
                       255            All channels




                                          VMB4AN PROTOCOL – edition 3                   18
‘Status request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_STATUS_REQUEST (0xFA)
    DATABYTE2 = Channel
                       Contents       Channel
                      0 (<9)          Alarm outputs 1…8
                         9            Sensor 1
                        10            Sensor 2
                        11            Sensor 3
                        12            Sensor 4
                        13            Analog output 1
                        14            Analog output 2
                        15            Analog output 3
                        16            Analog output 4
                       255            All channels

‘Lock output ’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes received
    DATABYTE1 = COMMAND_FORCED_OFF (0x12)
    DATABYTE2 = Channel
                     Contents          Dimmer channel
                        1              Alarm output 1
                        2              Alarm output 2
                        3              Alarm output 3
                        4              Alarm output 4
                        5              Alarm output 5
                        6              Alarm output 6
                        7              Alarm output 7
                        8              Alarm output 8
                        9              Sensor 1
                       10              Sensor 2
                       11              Sensor 3
                       12              Sensor 4
                       13              Analog output 1
                       14              Analog output 2
                       15              Analog output 3
                       16              Analog output 4
    DATABYTE3 = upper byte of lock time
    DATABYTE4 = high byte of lock time
    DATABYTE5 = low byte of lock time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero.
    When the time parameter contains 0xFFFFFF then the channel is permanently locked.




                                           VMB4AN PROTOCOL – edition 3                  19
‘Unlock output’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_CANCEL_FORCED_OFF (0x13)
    DATABYTE2 = Channel
                    Contents          Dimmer channel
                       1              Alarm output 1
                       2              Alarm output 2
                       3              Alarm output 3
                       4              Alarm output 4
                       5              Alarm output 5
                       6              Alarm output 6
                       7              Alarm output 7
                       8              Alarm output 8
                       9              Sensor 1
                      10              Sensor 2
                      11              Sensor 3
                      12              Sensor 4
                      13              Analog output 1
                      14              Analog output 2
                      15              Analog output 3
                      16              Analog output 4

‘Enable channel program’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_ENABLE_PROGRAM (0xB2)
    DATABYTE2 = Channel
                      Contents        Channel
                        1             Alarm output 1
                        2             Alarm output 2
                        3             Alarm output 3
                        4             Alarm output 4
                        5             Alarm output 5
                        6             Alarm output 6
                        7             Alarm output 7
                        8             Alarm output 8
                        9             Sensor 1
                       10             Sensor 2
                       11             Sensor 3
                       12             Sensor 4
                       13             Analog output 1
                       14             Analog output 2
                       15             Analog output 3
                       16             Analog output 4




                                    VMB4AN PROTOCOL – edition 3   20
‘Disable channel output Program’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes received
    DATABYTE1 = COMMAND_DISABLE_PROGRAM (0xB1)
    DATABYTE2 = Channel
                       Contents        Channel
                         1             Alarm output 1
                         2             Alarm output 2
                         3             Alarm output 3
                         4             Alarm output 4
                         5             Alarm output 5
                         6             Alarm output 6
                         7             Alarm output 7
                         8             Alarm output 8
                         9             Sensor 1
                        10             Sensor 2
                        11             Sensor 3
                        12             Sensor 4
                        13             Analog output 1
                        14             Analog output 2
                        15             Analog output 3
                        16             Analog output 4
    DATABYTE3 = upper byte of program disable time
    DATABYTE4 = high byte of program disable time
    DATABYTE5 = low byte of program disable time

   Remark:
   [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
   The command will be skipped when the time parameter contains zero.
   When the time parameter contains 0xFFFFFF then the channel program will be permanently disabled.

‘Select Program’ command received:
   SID10-SID9 = 11 (lowest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_SELECT_PROGRAM (0xB3)
    DATABYTE2 = Program mode
                     Contents         Selected program
                       0              None
                       1              Group 1 (ex. Summer)
                       2              Group 2 (ex. Winter)
                       3              Group 3 (ex. Holiday)




                                          VMB4AN PROTOCOL – edition 3                                 21
‘Read program step’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes to send
    DATABYTE1 = COMMAND_READ_PROGRAM_STEP (0xC0)
    DATABYTE2 = Start program step number (1…85)
    DATABYTE3 = Program group number (1…3)
    DATABYTE4 = Channel
                      Contents         Channel
                        1              Alarm output 1
                        2              Alarm output 2
                        3              Alarm output 3
                        4              Alarm output 4
                        5              Alarm output 5
                        6              Alarm output 6
                        7              Alarm output 7
                        8              Alarm output 8
                        9              Sensor 1
                       10              Sensor 2
                       11              Sensor 3
                       12              Sensor 4
                       13              Analog output 1
                       14              Analog output 2
                       15              Analog output 3
                       16              Analog output 4
    DATABYTE5 = Search direction (1 = search for next matched step / 0 = search for previous matched program step)

‘Write program step’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 8 data bytes to send
    DATABYTE1 = COMMAND_WRITE_PROGRAM_STEP (0xC2)
    DATABYTE2 = Program step number (1…85)
    DATABYTE3 = Program reference
                         Contents      Description
                         000xxxxx      Disable program step
                         001xxxxx      Absolute time
                         010xxxxx      Wake up time 1 + relative time
                         011xxxxx      Go to bed time 1 + relative time
                         100xxxxx      Wake up time 2 + relative time
                         101xxxxx      Go to bed time 2 + relative time
                         110xxxxx      Sunrise + relative time
                         111xxxxx      Sunset + relative time
                         xxx01111      Rel. time = 3h45min
                             …
                         xxx00001      Rel. time = 15min
                         xxx00000      Rel. time = 0
                         xxx11111      Rel. time = -15min
                             …
                         xxx10000      Rel. time = -4h




                                           VMB4AN PROTOCOL – edition 3                                               22
DATABYTE4 = Program step month & four least significant bits of day
                  Contents                           Description
                 xxxx0000       Weekly program
                 xxxx0001       January
                 xxxx0010       February
                 xxxx0011       March
                 xxxx0100       April
                 xxxx0101       May
                 xxxx0110       June
                 xxxx0111       July
                 xxxx1000       August
                 xxxx1001       September
                 xxxx1010       October
                 xxxx1011       November
                 xxxx1100       December
                 xxxx1101       Monthly program
                 xxxx1110       Monthly program
                 xxxx1111       Monthly program

                  Contents byte6     Contents byte4     Description
                    00xxxxxx           0000xxxx         Never
                    00xxxxxx           0001xxxx         Day 1of the month
                    00xxxxxx           0010xxxx         Day 2of the month
                       …                  ...           …
                    01xxxxxx           1111xxxx         Day 31of the month
                    10xxxxxx           0000xxxx         Never
                    10xxxxxx           0001xxxx         Every Monday
                    10xxxxxx           0010xxxx         Every Tuesday
                        ...               …             …
                    10xxxxxx           0111xxxx         Every Sunday
                    10xxxxxx           1000xxxx         Every weekend (sa & su)
                    10xxxxxx           1001xxxx         Every working day (mo…fr)
                    10xxxxxx           1010xxxx         Every day except Sunday
                    10xxxxxx           1011xxxx         Every day
                    10xxxxxx           1100xxxx         Never
                       …                  …             …
                    11xxxxxx           1111xxxx         Never

DATABYTE5 = Program step hour & group number
                  Contents      Description
                 xxx00000       0h
                 xxx00001       1h
                    …           …
                 xxx10111       23h
                 xx1xxxxx       Program group 1 (Summer program)
                 x1xxxxxx       Program group 2 (Winter program)
                 1xxxxxxx       Program group 3 (Holiday program)




                                      VMB4AN PROTOCOL – edition 3                   23
    DATABYTE6 = Program step minute & msb of day & every flag
                      Contents      Description
                     xx000000       0min
                     xx000001       1min
                        …           …
                     xx111011       59min

                   Contents byte6       Contents byte4     Description
                     00xxxxxx             0000xxxx         Never
                     00xxxxxx             0001xxxx         Day 1of the month
                     00xxxxxx             0010xxxx         Day 2of the month
                         …                   ...           …
                     01xxxxxx             1111xxxx         Day 31of the month
                     10xxxxxx             0000xxxx         Never
                     10xxxxxx             0001xxxx         Every Monday
                     10xxxxxx             0010xxxx         Every Tuesday
                         ...                 …             …
                     10xxxxxx             0111xxxx         Every Sunday
                     10xxxxxx             1000xxxx         Every weekend (sa & su)
                     10xxxxxx             1001xxxx         Every working day (mo…fr)
                     10xxxxxx             1010xxxx         Every day except Sunday
                     10xxxxxx             1011xxxx         Every day
                     10xxxxxx             1100xxxx         Never
                         …                   …             …
                     11xxxxxx             1111xxxx         Never
    DATABYTE7 = Program step action
                      Contents         Action
                          0            Unlock
                          1            Lock
                          2            Sensor preset 1 (safe) mode
                          3            Sensor preset 2 (night) mode
                          4            Sensor preset 3 (day) mode
                          5            Sensor preset 4 (comfort) mode
    DATABYTE8 = Channel
                      Contents         Channel
                         1                Alarm output 1
                         2                Alarm output 2
                         3                Alarm output 3
                         4                Alarm output 4
                         5                Alarm output 5
                         6                Alarm output 6
                         7                Alarm output 7
                         8                Alarm output 8
                         9                Sensor 1
                         10               Sensor 2
                         11               Sensor 3
                         12               Sensor 4
                         13               Analog output 1
                         14               Analog output 2
                         15               Analog output 3
                         16               Analog output 4
                        255               Delete program step



‘Clear LED’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Address of the linked push button module
    RTR = 0
    DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_CLEAR_LED (0xF5)
    DATABYTE2 = LEDs to clear (a one clears the corresponding LED)




                                         VMB4AN PROTOCOL – edition 3                   24
‘Set sensor input mode data’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 4 data bytes received
     DATABYTE1 = COMMAND_CONFIG_DATA (0xE4)
     DATABYTE2 = Channel
                        Contents        Channel
                          9             Sensor 1
                         10             Sensor 2
                         11             Sensor 3
                         12             Sensor 4
     DATABYTE3 = Index = 17
     DATABYTE4 = sensor input mode
                   Contents          Sensor mode
                          0          Voltage (0…10 V) sensor type
                          1          Current (4…20 mA) sensor type
                          2          Resistance (PT100/PT1000/Ni1000) sensor type
                          3          Period measurement sensor type

    Remark:
    Wait at least 10ms for sending a next command on the velbus.

‘Set sensor preset data’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 6 data bytes received
     DATABYTE1 = COMMAND_CONFIG_DATA (0xE4)
     DATABYTE2 = Channel
                         Contents       Channel
                           9            Sensor 1
                          10            Sensor 2
                          11            Sensor 3
                          12            Sensor 4
     DATABYTE3 = Index
                   Contents
                          18       Current Preset value
                          19       Preset 1 (safe) value
                          20       Preset 2 (night) value
                          21       Preset 3 (day) value
                          22       Preset 4 (comfort) value
     DATABYTE4 = data upper byte
     DATABYTE5 = data high byte
     DATABYTE6 = data low byte

    Remark:
    Wait at least 10ms for sending a next command on the velbus.




                                            VMB4AN PROTOCOL – edition 3             25
‘Set sensor offset data’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 5 data bytes received
     DATABYTE1 = COMMAND_CONFIG_DATA (0xE4)
     DATABYTE2 = Channel
                         Contents       Channel
                           9            Sensor 1
                          10            Sensor 2
                          11            Sensor 3
                          12            Sensor 4
     DATABYTE3 = Index
                    Contents
                          23       Raw offset (-32768…+32767)
     DATABYTE4 = data high byte
     DATABYTE5 = data low byte

    Remark:
    Wait at least 10ms for sending a next command on the velbus.

‘Sensor readout request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 3 data bytes to send
    DATABYTE1 = COMMAND_SENSOR_VALUE_REQUEST (0xE5)
    DATABYTE2 = Channel
                       Contents        Channel
                          9            Sensor 1
                         10            Sensor 2
                         11            Sensor 3
                         12            Sensor 4
    DATABYTE3 = auto send sensor value
                     (0 = no change auto send interval)
                     (1…4 = auto send disabled)
                     (5 = auto send when raw data changed with minimum interval time)
                     (6 = auto send when raw data 3.125% changed with minimum interval time)
                     (7 = auto send when raw data 6.25% changed with minimum interval time)
                     (8 = auto send when raw data 12.5% changed with minimum interval time)
                     (9 = auto send when raw data 25% changed with minimum interval time)
                     (10…255s = fixed interval)

‘Sensor settings request’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 data bytes to send
    DATABYTE1 = COMMAND_TEMP_SENSOR_SETTINGS_REQUEST (0xE7)
    DATABYTE2 = Channel
                        Contents       Channel
                           9           Sensor 1
                          10           Sensor 2
                          11           Sensor 3
                          12           Sensor 4




                                            VMB4AN PROTOCOL – edition 3                        26
‘Set sensor default sleep time’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 4 data bytes received
     DATABYTE1 = COMMAND_SET_DEFAULT_SLEEP_TIME (H’E3’)
     DATABYTE2 = Channel
                         Contents        Channel
                           9             Sensor 1
                          10             Sensor 2
                          11             Sensor 3
                          12             Sensor 4
     DATABYTE3 = High byte of the default sleep time
     DATABYTE4 = Low byte of the default sleep time into minutes
                       (valid range 0x0001 to 0xFEFF or 1min to 65.279min)

    Remark: Wait at least 20ms for sending a next command on the velbus

‘Switch sensor to preset 1 (safe) mode’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_SWITCH_TO_SAFE_MODE (0xDE)
    DATABYTE2 = Channel
                         Contents        Channel
                           9             Sensor 1
                          10             Sensor 2
                          11             Sensor 3
                          12             Sensor 4
    DATABYTE2 = High byte of the sleep time
    DATABYTE3 = Low byte of the sleep time into minutes

    Remark:
    A value of zero for the sleep time cancels the manual mode or sleep timer.
    A sleep time of 0x0001 starts the default sleep time.
    A sleep time between 0x0002 and 0xFEFF (2 to 65.279min) starts the sleep timer for that time and program steps will
    not be executed during that time.
    If the sleep time contains 0xFF00, the command is a program step.
    A sleep time of 0xFFFF puts the sensor into manual mode. Program steps will not be executed anymore.

‘Switch sensor to preset 2 (night) mode’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_SWITCH_TO_NIGHT_MODE (0xDD)
    DATABYTE2 = Channel
                         Contents        Channel
                           9             Sensor 1
                          10             Sensor 2
                          11             Sensor 3
                          12             Sensor 4
    DATABYTE2 = High byte of the sleep time
    DATABYTE3 = Low byte of the sleep time into minutes

    Remark:
    A value of zero for the sleep time cancels the manual mode or sleep timer.
    A sleep time of 0x0001 starts the default sleep time.
    A sleep time between 0x0002 and 0xFEFF (2 to 65.279min) starts the sleep timer for that time and program steps will
    not be executed during that time.
    If the sleep time contains 0xFF00, the command is a program step.
    A sleep time of 0xFFFF puts the sensor into manual mode. Program steps will not be executed anymore.




                                             VMB4AN PROTOCOL – edition 3                                                  27
‘Switch sensor to preset 3 (day) mode’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_SWITCH_TO_DAY_MODE (0xDC)
    DATABYTE2 = Channel
                         Contents        Channel
                           9             Sensor 1
                          10             Sensor 2
                          11             Sensor 3
                          12             Sensor 4
    DATABYTE2 = High byte of the sleep time
    DATABYTE3 = Low byte of the sleep time into minutes

   Remark:
   A value of zero for the sleep time cancels the manual mode or sleep timer.
   A sleep time of 0x0001 starts the default sleep time.
   A sleep time between 0x0002 and 0xFEFF (2 to 65.279min) starts the sleep timer for that time and program steps will
   not be executed during that time.
   If the sleep time contains 0xFF00, the command is a program step.
   A sleep time of 0xFFFF puts the sensor into manual mode. Program steps will not be executed anymore.

‘Switch sensor to preset 4 (comfort) mode’ command received:
    SID10-SID9 = 11 (lowest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_SWITCH_TO_COMFORT_MODE (0xDB)
    DATABYTE2 = Channel
                         Contents       Channel
                           9            Sensor 1
                          10            Sensor 2
                          11            Sensor 3
                          12            Sensor 4
    DATABYTE3 = High byte of the sleep time
    DATABYTE4 = Low byte of the sleep time into minutes

   Remark:
   A value of zero for the sleep time cancels the manual mode or sleep timer.
   A sleep time of 0x0001 starts the default sleep time.
   A sleep time between 0x0002 and 0xFEFF (2 to 65.279min) starts the sleep timer for that time and program steps will
   not be executed during that time.
   If the sleep time contains 0xFF00, the command is a program step.
   A sleep time of 0xFFFF puts the sensor into manual mode. Program steps will not be executed anymore.




                                            VMB4AN PROTOCOL – edition 3                                                  28
‘Linked push button status’ received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Address of the linked push button module
    RTR = 0
    DLC3...DLC0 = 4 data bytes received
    DATABYTE1 = COMMAND_PUSH_BUTTON_STATUS (0x00)
    DATABYTE2 = Linked push buttons just pressed (1 = just pressed)
    DATABYTE3 = Linked push buttons just released (1 = just released)
    DATABYTE4 = Linked push buttons long pressed (1 = longer than 0.85s pressed)

‘Set or Clear test mode’ command received:
     SID10-SID9 = 11 (lowest priority)
     SID8...SID1 = Module address
     RTR = 0
     DLC3...DLC0 = 2 data bytes received
     DATABYTE1 = COMMAND_SET_CLR_LEARN_MODE (0xB5)
     DATABYTE2 = Operating mode
                        Contents       Operating mode
                    B’00000000’        Normal
                    B’00000001’        Test mode

    Remark:
    After changing the operating mode, the module sends his status.
    There is a timeout of 30 minutes for the test mode.




                                             VMB4AN PROTOCOL – edition 3           29
‘Slider status’ received:
     SID10-SID9 = 00 (highest priority)
     SID8...SID1 = Address of the slider module
     RTR = 0
     DLC3...DLC0 = 4 data bytes received
     DATABYTE1 = COMMAND_SLIDER_STATUS (0x0F)
     DATABYTE2 = Slider channel
     DATABYTE3 = Slider status (0...100%)
     DATABYTE4 = don’t care

‘Set analog output percentage’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes received
     DATABYTE1 = COMMAND_SET_VALUE (0x07)
     DATABYTE2 = Channel
                       Contents        Channel
                        13             Analog output 1
                        14             Analog output 2
                        15             Analog output 3
                        16             Analog output 4
     DATABYTE3 = Analog value in % (0 to 100%)
     DATABYTE4 = high byte of dimspeed
     DATABYTE5 = low byte of dimspeed

    Remark: [DATABYTE4][DATABYTE5] contains a 16-bit time in seconds needed for dimming to the desired value.

‘Set analog output value (12-bit)’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 6 data bytes received
     DATABYTE1 = COMMAND_SET_VALUE (0x07)
     DATABYTE2 = Channel
                        Contents        Channel
                         13             Analog output 1
                         14             Analog output 2
                         15             Analog output 3
                         16             Analog output 4
     DATABYTE3 = Analog value high byte
     DATABYTE4 = Analog value low byte
     DATABYTE5 = high byte of dim speed
     DATABYTE6 = low byte of dim speed

    Remark: [DATABYTE4][DATABYTE5] contains a 16-bit time in seconds needed for dimming to the desired value.




                                            VMB4AN PROTOCOL – edition 3                                         30
‘Set analog output value at last used value’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 5 data bytes received
    DATABYTE1 = COMMAND_RESTORE_LAST_DIMVALUE (0x11)
    DATABYTE2 = Channel
                       Contents          Channel
                        13               Analog output 1
                        14               Analog output 2
                        15               Analog output 3
                        16               Analog output 4
    DATABYTE3 = Don’t care
    DATABYTE4 = high byte of dim speed
    DATABYTE5 = low byte of dim speed

   Remark: [DATABYTE4][DATABYTE5] contains a 16-bit time in seconds needed for dimming to the desired value..

‘Stop analog output dimming’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_STOP_DIMMING (0x10)
    DATABYTE2 = Channel
                      Contents         Channel
                       12              Analog output 1
                       13              Analog output 2
                       14              Analog output 3
                       15              Analog output 4

‘Start analog output timer’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes received
    DATABYTE1 = COMMAND_START_DIMMER_TIMER (0x08)
    DATABYTE2 = Channel
                       Contents        Channel
                        13             Analog output 1
                        14             Analog output 2
                        15             Analog output 3
                        16             Analog output 4
    DATABYTE3 = upper byte of timeout
    DATABYTE4 = high byte of timeout
    DATABYTE5 = low byte of timeout

   Remark: [DATABYTE3][DATABYTE4][DATABYTE5] contains a 24-bit time-out time in seconds.
   If the timeout parameter contains zero then no timer starts.
   If the timeout parameter contains 0xFFFFFF then analog output is permanently (no timeout).




                                        VMB4AN PROTOCOL – edition 3                                             31
‘Forced on analog output’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 5 data bytes received
   DATABYTE1 = COMMAND_FORCED_ON (0x14)
   DATABYTE2 = Channel
                     Contents         Dimmer channel
                       13             Analog output 1
                       14             Analog output 2
                       15             Analog output 3
                       16             Analog output 4
   DATABYTE3 = upper byte of ‘forced on’ time
   DATABYTE4 = high byte of ‘forced on’ time
   DATABYTE5 = low byte of ‘forced on’ time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero or the channels are already locked.
    When the time parameter contains 0xFFFFFF then the analog output is permanently forced on.

‘Cancel forced on analog output’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_CANCEL_FORCED_ON (0x15)
    DATABYTE2 = Channel
                      Contents        Dimmer channel
                        13            Analog output 1
                        14            Analog output 2
                        15            Analog output 3
                        16            Analog output 4

‘Inhibit analog output’ command received:
    SID10-SID9 = 00 (highest priority)
    SID8...SID1 = Module address
    RTR = 0
    DLC3...DLC0 = 5 data bytes received
    DATABYTE1 = COMMAND_INHIBIT (0x16)
    DATABYTE2 = Channel
                       Contents        Dimmer channel
                         13            Analog output 1
                         14            Analog output 2
                         15            Analog output 3
                         16            Analog output 4
    DATABYTE3 = upper byte of inhibit time
    DATABYTE4 = high byte of inhibit time
    DATABYTE5 = low byte of inhibit time

    Remark:
    [DATABYTE3][DATABYTE4][DATABYTE5] contain a 24-bit time in seconds
    The command will be skipped when the time parameter contains zero or the channels are already locked or forced on.
    When the time parameter contains 0xFFFFFF then the output channel is permanently inhibited.




                                            VMB4AN PROTOCOL – edition 3                                                  32
‘Cancel inhibit analog output’ command received:
   SID10-SID9 = 00 (highest priority)
   SID8...SID1 = Module address
   RTR = 0
   DLC3...DLC0 = 2 data bytes received
    DATABYTE1 = COMMAND_CANCEL_INHIBIT (0x17)
    DATABYTE2 = Channel
                       Contents       Dimmer channel
                        13            Analog output 1
                        14            Analog output 2
                        15            Analog output 3
                        16            Analog output 4




                                      VMB4AN PROTOCOL – edition 3   33
 Memory map:

Address   Contents                                                  Address   Contents
0x0000    Module name character 1                                   0x0001    Module name character 2
…         …                                                         …         …
0x003E    Module name character 63                                  0x003F    Module name character 64
0x0040    Terminator                                                0x0041    Location id low byte
0x0042    Location id high byte                                     0x0043    Group id low byte
0x0044    Group id high byte                                        0x0045    Alarm clock configuration
0x0046    Wake up 1 hour (0…23)                                     0x0047    Wake up 1 minutes (0…59)
0x0048    Go to bed 1 hour (0…23)                                   0x0049    Go to bed 1 minutes (0…59)
0x004A    Wake up 2 hour (0…23)                                     0x004B    Wake up 2 minutes (0…59)
0x004C    Go to bed 2 hour (0…23)                                   0x004D    Go to bed 2 minutes (0…59)
0x004E    Sunrise hour at 21 December (0…23)                        0x004F    Sunrise minutes at 21 December (0…59)
0x0050    Sunrise 21 January – sunrise 5 January (-128’..127’)      0x0051    Sunrise 5 February – sunrise 21 January (-128’..127’)
0x0052    Sunrise 21 February – sunrise 5 February (-128’..127’)    0x0053    Sunrise 5 March – sunrise 21 February (-128’..127’)
0x0054    Sunrise 21 March – sunrise 5 March (-128’..127’)          0x0055    Sunrise 5 April – sunrise 21 March (-128’..127’)
0x0056    Sunrise 21 April – sunrise 5 April (-128’..127’)          0x0057    Sunrise 5 May – sunrise 21 April (-128’..127’)
0x0058    Sunrise 21 May – sunrise 5 May (-128’..127’)              0x0059    Sunrise 5 June – sunrise 21 May (-128’..127’)
0x005A    Sunrise 21 June – sunrise 5 June (-128’..127’)            0x005B    Sunrise 5 July – sunrise 21 June (-128’..127’)
0x005C    Sunrise 21 July – sunrise 5 July (-128’..127’)            0x005D    Sunrise 5 August – sunrise 21 July (-128’..127’)
0x005E    Sunrise 21 August – sunrise 5 August (-128’..127’)        0x005F    Sunrise 5 September – sunrise 21 August (-128’..127’)
0x0060    Sunrise 21 September – sunrise 5 September (-128..127’)   0x0061    Sunrise 5 October – sunrise 21 September (-128’..127’)
0x0062    Sunrise 21 October – sunrise 5 October (-128’..127’)      0x0063    Sunrise 5 November – sunrise 21 October (-128’..127’)
0x0064    Sunrise 21 November – sunrise 5 November (-128’..127’)    0x0065    Sunrise 5 December – sunrise 21 November (-128’..127’)
0x0066    Sunrise 21 December – sunrise 5 December (-128’..127’)    0x0067    Sunrise 5 January – sunrise 21 December (-128’..127’)
0x0068    Sunset hour at 21 December (0…23)                         0x0069    Sunset minutes at 21 December (0…59)
0x006A    Sunset 21 January – sunset 5 January (-128’..127’)        0x006B    Sunset 5 February – sunset 21 January (-128’..127’)
0x006C    Sunset 21 February – sunset 5 February (-128’..127’)      0x006D    Sunset 5 March – sunset 21 February (-128’..127’)
0x006E    Sunset 21 March – sunset 5 March (-128’..127’)            0x006F    Sunset 5 April – sunset 21 March (-128’..127’)
0x0070    Sunset 21 April – sunset 5 April (-128’..127’)            0x0071    Sunset 5 May – sunset 21 April (-128’..127’)
0x0072    Sunset 21 May – sunset 5 May (-128’..127’)                0x0073    Sunset 5 June – sunset 21 May (-128’..127’)
0x0074    Sunset 21 June – sunset 5 June (-128’..127’)              0x0075    Sunset 5 July – sunset 21 June (-128’..127’)
0x0076    Sunset 21 July – sunset 5 July (-128’..127’)              0x0077    Sunset 5 August – sunset 21 July (-128’..127’)
0x0078    Sunset 21 August – sunset 5 August (-128’..127’)          0x0079    Sunset 5 September – sunset 21 August (-128’..127’)
0x007A    Sunset 21 September – sunset 5 September (-128’..127’)    0x007B    Sunset 5 October – sunset 21 September (-128’..127’)
0x007C    Sunset 21 October – sunset 5 October (-128’..127’)        0x007D    Sunset 5 November – sunset 21 October (-128’..127’)
0x007E    Sunset 21 November – sunset 5 November (-128’..127’)      0x007F    Sunset 5 December – sunset 21 November (-128’..127’)
0x0082    Sunset 21 December – sunset 5 December (-128’..127’)      0x0081    Sunset 5 January – sunset 21 December (-128’..127’)
0x0082    Alarm output 1 name character 1                           0x0083    Alarm output 1 name character 1
...       …                                                         …         …
0x0090    Alarm output 1 name character 15                          0x0091    Alarm output 1 name character 16
0x0092    Alarm output 2 name character 1                           0x0093    Alarm output 2 name character 1
...       …                                                         …         …
0x00A0    Alarm output 2 name character 15                          0x00A1    Alarm output 2 name character 16
0x00A2    Alarm output 3 name character 1                           0x00A3    Alarm output 3 name character 1
...       …                                                         …         …
0x00B0    Alarm output 3 name character 15                          0x00B1    Alarm output 3 name character 16
0x00B2    Alarm output 4 name character 1                           0x00B3    Alarm output 4 name character 1
...       …                                                         …         …
0x00C0    Alarm output 4 name character 15                          0x00C1    Alarm output 4 name character 16
0x00C2    Alarm output 5 name character 1                           0x00C3    Alarm output 5 name character 1
...       …                                                         …         …
0x00D0    Alarm output 5 name character 15                          0x00D1    Alarm output 5 name character 16
0x00D2    Alarm output 6 name character 1                           0x00D3    Alarm output 6 name character 1
...       …                                                         …         …
0x00E0    Alarm output 6 name character 15                          0x00E1    Alarm output 6 name character 16
0x00E2    Alarm output 7 name character 1                           0x00E3    Alarm output 7 name character 1
...       …                                                         …         …
0x00F0    Alarm output 7 name character 15                          0x00F1    Alarm output 7 name character 16
0x00F2    Alarm output 8 name character 1                           0x00F3    Alarm output 8 name character 1
...       …                                                         …         …
0x0100    Alarm output 8 name character 15                          0x0101    Alarm output 8 name character 16




                                                VMB4AN PROTOCOL – edition 3                                                  34
0x0102   Alarm condition 1 flags                                  0x0103      Alarm condition 1 absolute/relative
0x0104   Alarm condition 1 low byte ‘On’ limit/offset             0x0105      Alarm condition 1 high byte ‘On’ limit/offset
0x0106   Alarm condition 1 upper byte ‘On’ limit/offset           0x0107      Alarm condition 1 low byte ‘Off’ limit/offset
0x0108   Alarm condition 1 high byte ‘Off’ limit/offset           0x0109      Alarm condition 1 upper byte ‘Off’ limit/offset
0x010A   Alarm condition 1 ‘Off-to-On’ reaction time              0x010B      Alarm condition 1 ‘On-to-Off’ reaction time
         …                                                                    …
0x0274   Alarm condition 38 setting flags                         0x0275      Alarm condition 38 absolute/relative
0x0276   Alarm condition 38 ‘On’ limit low byte                   0x0277      Alarm condition 38 ‘On’ limit high byte
0x0278   Alarm condition 38 ‘On’ limit upper byte                 0x0179      Alarm condition 38 ‘Off’ limit low byte
0x027A   Alarm condition 38 ‘Off’ limit high byte                 0x027B      Alarm condition 38 ‘Off’ limit upper byte
0x027C   Alarm condition 38 ‘Off-to-On’ reaction time             0x027D      Alarm condition 38 ‘On-to-Off’ reaction time

               Alarm condition flag
                       Contents             Alarm settings flags
                     B’xxxxxx00’                Sensor 1
                     B’xxxxxx01’                Sensor 2
                     B’xxxxxx10’                Sensor 3
                     B’xxxxxx11’                Sensor 4
                     B’xxxxx0xx’                ‘Greater or equal than’ alarm type (normal)
                     B’xxxxx1xx’                ‘Less than’ alarm type (inverted)
                     B’xxxx0xxx’                Logical OR alarm operator
                     B’xxxx1xxx’                Logical AND alarm operator
                     B’0000xxxx’                Assigned to alarm output 1
                     B’0001xxxx’                Assigned to alarm output 2
                     B’0010xxxx’                Assigned to alarm output 3
                     B’0011xxxx’                Assigned to alarm output 4
                     B’0100xxxx’                Assigned to alarm output 5
                     B’0101xxxx’                Assigned to alarm output 6
                     B’0110xxxx’                Assigned to alarm output 7
                     B’0111xxxx’                Assigned to alarm output 8
                     B’1xxxxxxx’                End of alarm

               Alarm condition absolute/relative
                       Contents         Alarm condition limit
                     B’xxxx0000’            Absolute ‘on’ limit
                     B’xxxx0001’            Relative ‘on’ limit: preset 1 +/- offset
                     B’xxxx0010’            Relative ‘on’ limit: preset 2 +/- offset
                     B’xxxx0011’            Relative ‘on’ limit: preset 3 +/- offset
                     B’xxxx0100’            Relative ‘on’ limit: preset 4 +/- offset
                     B’xxxx1111’            Relative ‘on’ limit: sensor mode preset +/- offset
                     B’0000xxxx’            Absolute ‘off’ limit
                     B’0001xxxx’            Relative ‘off’ limit: preset 1 +/- offset
                     B’0010xxxx’            Relative ‘off’ limit: preset 2 +/- offset
                     B’0011xxxx’            Relative ‘off’ limit: preset 3 +/- offset
                     B’0100xxxx’            Relative ‘off’ limit: preset 4 +/- offset
                     B’1111xxxx’            Relative ‘off’ limit: sensor mode preset +/- offset

               ‘On’ and ‘Off’ limit setting = unsigned 24-bit value (0…8388607)
               ‘On’ and ‘Off’ offset setting = signed 24-bit value (-8388608…8388607)




                                                VMB4AN PROTOCOL – edition 3                                                     35
Alarm condition ‘Off-to-On’ and ‘On-to-Off’ reaction times
        contents            Reaction time
            0               0s
            1               1s
            2               2s
           ...
           59               59s
           60               1min
           61               1min1s
           ...
           …
          119               1min59s
          120               2min
          121               2min15s
           ...
          131               4min45s
          132               5min
          133               5min30s
           ...
          181               29min30s
          182               30min
          183               31min
           ...
          211               59min
          212               1h


Alarm clock configuration
        Contents        Channel locked/unlocked
      B’xxxxxxx0’       Alarm 1 disabled (default)
      B’xxxxxxx1’       Alarm 1 enabled
      B’0xxxxx0x’       Local alarm 1 (default)
      B’1xxxxx1x’       Global alarm 1
      B’xxxxx0xx’       Alarm 2 disabled (default)
      B’xxxxx1xx’       Alarm 2 enabled
      B’xxxx0xxx’       Local alarm 2 (default)
      B’xxxx1xxx’       Global alarm 2
      B’xxx0xxxx’       Sunrise disabled
      B’xxx1xxxx’       Sunrise enabled (default)
      B’xx0xxxxx’       Sunset disabled
      B’xx1xxxxx’       Sunset enabled (default)
      B’x0xxxxxx’       Day light savings disabled
      B’x1xxxxxx’       Day light savings enabled (default)




                             VMB4AN PROTOCOL – edition 3      36
Address   Contents                                     Address   Contents
0x027E    Sensor 1 name character 1                    0x027F    Sensor 1 name character 2
...       …                                            …         …
0x028C    Sensor 1 name character 15                   0x028D    Sensor 1 name character 16
0x028E    Sensor 1 mode I character 1                  0x028F    Sensor 1 mode I character 2
...       …                                            …         …
0x029C    Sensor 1 mode I character 15                 0x029D    Sensor 1 mode I character 16
0x029E    Sensor 1 mode II character 1                 0x029F    Sensor 1 mode II character 2
...       …                                            …         …
0x02AC    Sensor 1 mode II character 15                0x02AD    Sensor 1 mode II character 16
0x02AE    Sensor 1 mode III character 1                0x02AF    Sensor 1 mode III character 2
...       …                                            …         …
0x02BC    Sensor 1 mode III character 15               0x02BD    Sensor 1 mode III character 16
0x02BE    Sensor 1 mode IV character 1                 0x02BF    Sensor 1 mode IV character 2
...       …                                            …         …
0x02CC    Sensor 1 mode IV character 15                0x02CD    Sensor 1 mode IV character 16
0x02CE    Sensor 1 mode                                0x02CF    Sensor 1 auto send minimum interval time
0x02D0    Sensor 1 default sleep time low byte         0x02D1    Sensor 1 default sleep time high byte
0x02D2    Sensor 1 preset 1 low byte                   0x02D3    Sensor 1 preset 1 high byte
0x02D4    Sensor 1 preset 1 upper byte                 0x02D5    Sensor 1 preset 2 low byte
0x02D6    Sensor 1 preset 2 high byte                  0x02D7    Sensor 1 preset 2 upper byte
0x02D8    Sensor 1 preset 3 low byte                   0x02D9    Sensor 1 preset 3 high byte
0x02DA    Sensor 1 preset 3 upper byte                 0x02DB    Sensor 1 preset 4 low byte
0x02DC    Sensor 1 preset 4 high byte                  0x02DD    Sensor 1 preset 4 upper byte
0x02DE    Sensor 1 calibration offset low byte         0x02DF    Sensor 1 calibration offset high byte
0x02E0    Sensor 1 units character 1                   0x02E1    Sensor 1 units character 2
...       …                                            ...       …
0x02E6    Sensor 1 units character 7                   0x02E7    Sensor 1 number of digits after decimal point
0x02E8    Sensor 1 limit 1 low byte                    0x02E9    Sensor 1 limit 1 high byte
0x02EA    Sensor 1 limit 1 upper byte                  0x02EB    Sensor 1 start 1 low byte
0x02EC    Sensor 1 start 1 high byte                   0x02ED    Sensor 1 start 1 upper byte
0x02EE    Sensor 1 start 1 most significant byte       0x02EF    Sensor 1 factor 1 low byte
0x02F0    Sensor 1 factor 1 high byte                  0x02F1    Sensor 1 divisor 1
…         …                                            …         …
0x03A6    Sensor 1 limit 20 low byte                   0x03A7    Sensor 1 limit 20 high byte
0x03A8    Sensor 1 limit 20 upper byte                 0x03A9    Sensor 1 start 20 low byte
0x03AA    Sensor 1 start 20 high byte                  0x03AB    Sensor 1 start 20 upper byte
0x03AC    Sensor 1 start 20 most significant byte      0x03AD    Sensor 1 factor 20 low byte
0x03AE    Sensor 1 factor 20 high byte                 0x03AF    Sensor 1 divisor 20




                                           VMB4AN PROTOCOL – edition 3                                           37
Address   Contents                                     Address   Contents
0x03B0    Sensor 2 name character 1                    0x03B1    Sensor 2 name character 2
...       …                                            …         …
0x03BE    Sensor 2 name character 15                   0x03BF    Sensor 2 name character 16
0x03C0    Sensor 2 mode I character 1                  0x03C1    Sensor 2 mode I character 2
...       …                                            …         …
0x03CE    Sensor 2 mode I character 15                 0x03CF    Sensor 2 mode I character 16
0x03D0    Sensor 2 mode II character 1                 0x03D1    Sensor 2 mode II character 2
...       …                                            …         …
0x03DC    Sensor 2 mode II character 15                0x03DF    Sensor 2 mode II character 16
0x03E0    Sensor 2 mode III character 1                0x03E1    Sensor 2 mode III character 2
...       …                                            …         …
0x03EC    Sensor 2 mode III character 15               0x03EF    Sensor 2 mode III character 16
0x03F0    Sensor 2 mode IV character 1                 0x03F1    Sensor 2 mode IV character 2
...       …                                            …         …
0x03FC    Sensor 2 mode IV character 15                0x03FF    Sensor 2 mode IV character 16
0x0400    Sensor 2 mode                                0x0401    Sensor 2 auto send minimum interval time
0x0402    Sensor 2 default sleep time low byte         0x0403    Sensor 2 default sleep time high byte
0x0404    Sensor 2 preset 1 low byte                   0x0405    Sensor 2 preset 1 high byte
0x0406    Sensor 2 preset 1 upper byte                 0x0407    Sensor 2 preset 2 low byte
0x0408    Sensor 2 preset 2 high byte                  0x0409    Sensor 2 preset 2 upper byte
0x040A    Sensor 2 preset 3 low byte                   0x040B    Sensor 2 preset 3 high byte
0x040C    Sensor 2 preset 3 upper byte                 0x040D    Sensor 2 preset 4 low byte
0x040E    Sensor 2 preset 4 high byte                  0x040F    Sensor 2 preset 4 upper byte
0x0410    Sensor 2 calibration offset low byte         0x0411    Sensor 2 calibration offset high byte
0x0412    Sensor 2 units character 1                   0x0413    Sensor 2 units character 2
...       …                                            ...       …
0x0418    Sensor 2 units character 7                   0x0419    Sensor 2 number of digits after decimal point
0x041A    Sensor 2 limit 1 low byte                    0x041B    Sensor 2 limit 1 high byte
0x041C    Sensor 2 limit 1 upper byte                  0x041D    Sensor 2 start 1 low byte
0x041E    Sensor 2 start 1 high byte                   0x041F    Sensor 2 start 1 upper byte
0x0420    Sensor 2 start 1 most significant byte       0x0421    Sensor 2 factor 1 low byte
0x0422    Sensor 2 factor 1 high byte                  0x0423    Sensor 2 divisor 1
…         …                                            …         …
0x04D8    Sensor 2 limit 20 low byte                   0x04D9    Sensor 2 limit 20 high byte
0x04DA    Sensor 2 limit 20 upper byte                 0x04DB    Sensor 2 start 20 low byte
0x04DC    Sensor 2 start 20 high byte                  0x04DD    Sensor 2 start 20 upper byte
0x04DE    Sensor 2 start 20 most significant byte      0x04DF    Sensor 2 factor 20 low byte
0x04E0    Sensor 2 factor 20 high byte                 0x04E1    Sensor 2 divisor 20




                                           VMB4AN PROTOCOL – edition 3                                           38
Address   Contents                                     Address   Contents
0x04E2    Sensor 3 name character 1                    0x04E3    Sensor 3 name character 2
...       …                                            …         …
0x04F0    Sensor 3 name character 15                   0x04F1    Sensor 3 name character 16
0x04F2    Sensor 3 mode I character 1                  0x04F3    Sensor 3 mode I character 2
...       …                                            …         …
0x0500    Sensor 3 mode I character 15                 0x0501    Sensor 3 mode I character 16
0x0502    Sensor 3 mode II character 1                 0x0503    Sensor 3 mode II character 2
...       …                                            …         …
0x0510    Sensor 3 mode II character 15                0x0511    Sensor 3 mode II character 16
0x0512    Sensor 3 mode III character 1                0x0513    Sensor 3 mode III character 2
...       …                                            …         …
0x0520    Sensor 3 mode III character 15               0x0521    Sensor 3 mode III character 16
0x0522    Sensor 3 mode IV character 1                 0x0523    Sensor 3 mode IV character 2
...       …                                            …         …
0x0530    Sensor 3 mode IV character 15                0x0531    Sensor 3 mode IV character 16
0x0532    Sensor 3 mode                                0x0533    Sensor 3 auto send minimum interval time
0x0534    Sensor 3 default sleep time low byte         0x0535    Sensor 3 default sleep time high byte
0x0536    Sensor 3 preset 1 low byte                   0x0537    Sensor 3 preset 1 high byte
0x0538    Sensor 3 preset 1 upper byte                 0x0539    Sensor 3 preset 2 low byte
0x053A    Sensor 3 preset 2 high byte                  0x053B    Sensor 3 preset 2 upper byte
0x053C    Sensor 3 preset 3 low byte                   0x053D    Sensor 3 preset 3 high byte
0x053E    Sensor 3 preset 3 upper byte                 0x053F    Sensor 3 preset 4 low byte
0x0540    Sensor 3 preset 4 high byte                  0x0541    Sensor 3 preset 4 upper byte
0x0542    Sensor 3 calibration offset low byte         0x0543    Sensor 3 calibration offset high byte
0x0544    Sensor 3 units character 1                   0x0545    Sensor 3 units character 2
...       …                                            ...       …
0x054A    Sensor 3 units character 7                   0x054B    Sensor 3 number of digits after decimal point
0x054C    Sensor 3 limit 1 low byte                    0x054D    Sensor 3 limit 1 high byte
0x054E    Sensor 3 limit 1 upper byte                  0x054F    Sensor 3 start 1 low byte
0x0550    Sensor 3 start 1 high byte                   0x0551    Sensor 3 start 1 upper byte
0x0552    Sensor 3 start 1 most significant byte       0x0553    Sensor 3 factor 1 low byte
0x0554    Sensor 3 factor 1 high byte                  0x0555    Sensor 3 divisor 1
…         …                                            …         …
0x060A    Sensor 3 limit 20 low byte                   0x060B    Sensor 3 limit 20 high byte
0x060C    Sensor 3 limit 20 upper byte                 0x060D    Sensor 3 start 20 low byte
0x060E    Sensor 3 start 20 high byte                  0x060F    Sensor 3 start 20 upper byte
0x0610    Sensor 3 start 20 most significant byte      0x0611    Sensor 3 factor 20 low byte
0x0612    Sensor 3 factor 20 high byte                 0x0613    Sensor 3 divisor 20




                                           VMB4AN PROTOCOL – edition 3                                           39
Address     Contents                                          Address       Contents
0x0614      Sensor 4 name character 1                         0x0615        Sensor 4 name character 2
...         …                                                 …             …
0x0622      Sensor 4 name character 15                        0x0623        Sensor 4 name character 16
0x0624      Sensor 4 mode I character 1                       0x0625        Sensor 4 mode I character 2
...         …                                                 …             …
0x0632      Sensor 4 mode I character 15                      0x0633        Sensor 4 mode I character 16
0x0634      Sensor 4 mode II character 1                      0x0635        Sensor 4 mode II character 2
...         …                                                 …             …
0x0642      Sensor 4 mode II character 15                     0x0643        Sensor 4 mode II character 16
0x0644      Sensor 4 mode III character 1                     0x0645        Sensor 4 mode III character 2
...         …                                                 …             …
0x0652      Sensor 4 mode III character 15                    0x0653        Sensor 4 mode III character 16
0x0654      Sensor 4 mode IV character 1                      0x0655        Sensor 4 mode IV character 2
...         …                                                 …             …
0x0662      Sensor 4 mode IV character 15                     0x0663        Sensor 4 mode IV character 16
0x0664      Sensor 4 mode                                     0x0665        Sensor 4 auto send minimum interval time
0x0666      Sensor 4 default sleep time low byte              0x0667        Sensor 4 default sleep time high byte
0x0668      Sensor 4 preset 1 low byte                        0x0669        Sensor 4 preset 1 high byte
0x066A      Sensor 4 preset 1 upper byte                      0x066A        Sensor 4 preset 2 low byte
0x066C      Sensor 4 preset 2 high byte                       0x066C        Sensor 4 preset 2 upper byte
0x066E      Sensor 4 preset 3 low byte                        0x066F        Sensor 4 preset 3 high byte
0x0670      Sensor 4 preset 3 upper byte                      0x0671        Sensor 4 preset 4 low byte
0x0672      Sensor 4 preset 4 high byte                       0x0673        Sensor 4 preset 4 upper byte
0x0674      Sensor 4 calibration offset low byte              0x0675        Sensor 4 calibration offset high byte
0x0676      Sensor 4 units character 1                        0x0677        Sensor 4 units character 2
...         …                                                 ...           …
0x067C      Sensor 4 units character 7                        0x067D        Sensor 4 number of digits after decimal point
0x067E      Sensor 4 limit 1 low byte                         0x067F        Sensor 4 limit 1 high byte
0x0680      Sensor 4 limit 1 upper byte                       0x0681        Sensor 4 start 1 low byte
0x0682      Sensor 4 start 1 high byte                        0x0683        Sensor 4 start 1 upper byte
0x0684      Sensor 4 start 1 most significant byte            0x0685        Sensor 4 factor 1 low byte
0x0686      Sensor 4 factor 1 high byte                       0x0687        Sensor 4 divisor 1
…           …                                                               …
0x073C      Sensor 4 limit 20 low byte                        0x073D        Sensor 4 limit 20 high byte
0x073E      Sensor 4 limit 20 upper byte                      0x073F        Sensor 4 start 20 low byte
0x0740      Sensor 4 start 20 high byte                       0x0741        Sensor 4 start 20 upper byte
0x0742      Sensor 4 start 20 most significant byte           0x0743        Sensor 4 factor 20 low byte
0x0744      Sensor 4 factor 20 high byte                      0x0745        Sensor 4 divisor 20

   Sensor mode
            Contents                Sensor mode
            xxxxxx00                Voltage (0…10 V) sensor type
            xxxxxx01                Current (4…20 mA) sensor type
            xxxxxx10                Resistance (PT100/PT1000/Ni1000) sensor type
            xxxxxx11                Period measurement sensor type

   Sensor auto send minimum interval time: 0…255 seconds

   Sensor default sleep time: valid range 0x0001 to 0xFEFF or 1 minute to 65.279 minutes

   Sensor preset value: 0…16777215 raw data

   Sensor units: null terminated string
   Sensor readout
            Limitn-1 < Raw < Limitn
            Readout = [(Startn + factorn * (Raw – CalOffset – Limitn-1 + 1)) / 2Divisor_n]/10 Number_of_digits_after_decimal_point

   Sensor calibration offset: -32768…32767 raw data

   Sensor limit: 0…16777215

   Sensor start: - -2147483648…2147483647




                                             VMB4AN PROTOCOL – edition 3                                                             40
Sensor factor: 0…65535

Sensor divisor: 0…31 (divide by 20…231)

Number of digits after decimal point: 0…3

Reverse formule
        Readoutn-1 < Readout < Readoutn
        If n=1 then Limitn-1 = 0
        Raw = Limitn-1 + 1 + CalOffset + (Readout*10 Number_of_digits_after_decimal_point * 2Divisor_n – Startn)/factorn




                                         VMB4AN PROTOCOL – edition 3                                                       41
Address   Contents                                  Address   Contents
0x0746    Analog output 1 name character 1          0x0747    Analog output 1 name character 1
...       …                                         …         …
0x0754    Analog output 1 name character 15         0x0755    Analog output 1 name character 16
0x0756    Analog output 2 name character 1          0x0757    Analog output 2 name character 1
...       …                                         …         …
0x0764    Analog output 2 name character 15         0x0765    Analog output 2 name character 16
0x0766    Analog output 3 name character 1          0x0767    Analog output 3 name character 1
...       …                                         …         …
0x0774    Analog output 3 name character 15         0x0775    Analog output 3 name character 16
0x0776    Analog output 4 name character 1          0x0777    Analog output 4 name character 1
...       …                                         …         …
0x0784    Analog output 4 name character 15         0x0785    Analog output 4 name character 16




                                        VMB4AN PROTOCOL – edition 3                               42
Address    Contents                                      Address      Contents
0x0786     Linked Push button 1 module address           0x0787       Linked Push button 1 bit number
0x0788     Linked Push button 1 action                   0x0789       Linked Push button 1 time parameter
0x078A     Linked Push button 1 channel parameter        ...
...        ...                                           ...          ...
0x0938     …                                             0x0939       Linked Push button 88 module address
0x093A     Linked Push button 88 bit number              0x093B       Linked Push button 88 action
0x093C     Linked Push button 88 time parameter          0x093D       Linked Push button 88 channel parameter
0x093E     Not used                                      0x093F       Not used

Remark: Unused locations contain 0xFF
        Action
            Action       Action                                                           Time              Channel
            number                                                                        parameter
            0            Lock channel at closed switch                                    -                 Channel (1...16)
            1            Lock channel at opened switch                                    -                 Channel (1...16)
            2            Lock channel                                                     Timeout           Channel (1...16)
            3            Lock/unlock channel                                              Timeout           Channel (1...16)
            4            Unlock channel                                                   -                 Channel (1...16)
            5            Disable channel program at closed switch                         -                 Channel (1...16)
            6            Disable channel program at opened switch                         -                 Channel (1...16)
            7            Disable channel program                                          Timeout           Channel (1...16)
            8            Disable/enable channel program                                   Timeout           Channel (1...16)
            9            Enable channel program                                           -                 Channel (1...16)
            10           Select no programs                                               -                 -
            11           Select program group 1 (e.g. summer programs)                    -                 -
            12           Select/deselect program group 1 (e.g. summer programs)           -                 -
            13           Select program group 2 (e.g. winter programs)                    -                 -
            14           Select/deselect program group 2 (e.g. winter programs)           -                 -
            15           Select program group 3 (e.g. holiday programs)                   -                 -
            16           Select/deselect program group 3 (e.g. holiday programs)          -                 -
            17           Enable Clock Alarm 1 related program steps at closed switch      -                 -
            18           Enable Clock Alarm 1 related program steps at open switch        -                 -
            19           Disable Clock Alarm 1 related program steps at closed switch     -                 -
            20           Disable Clock Alarm 1 related program steps at open switch       -                 -
            21           Enable Clock Alarm 1 related program steps                       -                 -
            22           Enable/Disable Clock Alarm 1 related program steps               -                 -
            23           Disable Clock Alarm 1 related program steps                      -                 -
            24           Enable Clock Alarm 2 related program steps at closed switch      -                 -
            25           Enable Clock Alarm 2 related program steps at open switch        -                 -
            26           Disable Clock Alarm 2 related program steps at closed switch     -                 -
            27           Disable Clock Alarm 2 related program steps at open switch       -                 -
            28           Enable Clock Alarm 2 related program steps                       -                 -
            29           Enable/Disable Clock Alarm 2 related program steps               -                 -
            30           Disable Clock Alarm 2 related program steps                      -                 -
            31           Enable Sunrise related program steps at closed switch            -                 -
            32           Enable Sunrise related program steps at open switch              -                 -
            33           Disable Sunrise related program steps at closed switch           -                 -
            34           Disable Sunrise related program steps at open switch             -                 -
            35           Enable Sunrise related program steps                             -                 -
            36           Enable/Disable Sunrise related program steps                     -                 -
            37           Disable Sunrise related program steps                            -                 -
            38           Enable Sunset related program steps at closed switch             -                 -
            39           Enable Sunset related program steps at open switch               -                 -
            40           Disable Sunset related program steps at closed switch            -                 -
            41           Disable Sunset related program steps at open switch              -                 -
            42           Enable Sunset related program steps                              -                 -
            43           Enable/Disable Sunset related program steps                      -                 -
            44           Disable Sunset related program steps                             -                 -
            45           Sensor to Preset 1 (Safe) mode                                   Sleep time        Channel (9...12)
            46           Sensor to Preset 2 (Night) mode                                  Sleep time        Channel (9...12)
            47           Sensor to Preset 3 (Day) mode                                    Sleep time        Channel (9...12)
            48           Sensor to Preset 4 (Comfort) mode                                Sleep time        Channel (9...12)




                                         VMB4AN PROTOCOL – edition 3                                                           43
Channel
     Contents                 Channel
         1              Alarm output 1
         2              Alarm output 2
         3              Alarm output 3
         4              Alarm output 4
         5              Alarm output 5
         6              Alarm output 6
         7              Alarm output 7
         8              Alarm output 8
         9              Sensor 1
        10              Sensor 2
        11              Sensor 3
        12              Sensor 4
        13              Analog output 1
        14              Analog output 2
        15              Analog output 3
        16              Analog output 4

Time parameter
      Time       Timeout           Sleep time   action
   parameter                       parameter
         0       0s (no timer)     0            No action
         1       1s                1            Select until next program step execution
         2       2s                2            Select for default sleep time (see sensor config.)
         3       3s                3            Select for 15 min (auto return to program)
        ...                        4            Select for 30 min (auto return to program)
       119       1min59s           ...          ...
       120       2min              17           Select for 3h45 min (auto return to program)
       121       2min15s           18           Select for 4h min (auto return to program)
        ...                        19           Select for 4h30 min (auto return to program)
       131       4min45s           ...          ...
       132       5min              33           Select for 11h30 min (auto return to program)
       133       5min30s           34           Select for 12h (auto return to program)
        ...                        35           Select for 13h (auto return to program)
       181       29min30s          ...          ...
       182       30min             45           Select for 23h (auto return to program)
       183       31min             46           Select for 1 day (auto return to program)
        ...                        47           Select for 1 day 12h (auto return to program)
       211       59min             ...          ...
       212       1h                57           Select for 6 days 12h (auto return to program)
       213       1h15min           58           Select for 7 days (auto return to program)
        ...                        59           Select for 8 days (auto return to program)
       227       4h45min           ...          ...
       228       5h                96           Select for 45 days (auto return to program)
       229       5h30min           97           Select and ignore all program steps
        ...      ...
       237       9h30min
       238       10h
       239       11h
        ...
       251       23h
       252       1d
       253       2d
       254       3d
       255       Infinite




                            VMB4AN PROTOCOL – edition 3                                              44
Address    Contents                                     Address      Contents
0x0940     Program step 1 byte1                         0x0941       Program step 1 byte2
0x0942     Program step 1 byte3                         0x0943       Program step 1 byte4
0x0944     Program step 1 byte5                         0x0945       Program step 1 byte6
…          …                                            …            …
0x0B38     Program step 85 byte1                        0x0B39       Program step 85 byte2
0x0B3A     Program step 85 byte3                        0x0B3B       Program step 85 byte4
0x0B3C     Program step 85 byte5                        0x0B3D       Program step 85 byte6
0x0B3E     Not used                                     0x0B3F       Not used


            Contents program byte1             Description
                 B’000xxxxx’                   Disable program step
                 B’001xxxxx’                   Absolute time
                 B’010xxxxx’                   Wake up time 1 + relative time
                 B’011xxxxx’                   Go to bed time 1 + relative time
                 B’100xxxxx’                   Wake up time 2 + relative time
                 B’101xxxxx’                   Go to bed time 2 + relative time
                 B’110xxxxx’                   Sunrise + relative time
                 B’111xxxxx’                   Sunset + relative time
                 B’xxx01111’                   Rel. time = 3h45min
                      …
                 B’xxx00001’                   Rel. time = 15min
                 B’xxx00000’                   Rel. time = 0
                 B’xxx11111’                   Rel. time = -15min
                      …
                 B’xxx10000’                   Rel. time = -4h
  Remark: Wake up, Go to bed, sunrise & sunset time are only allowed for weekly programs

            Contents program byte2             Description
                 B’xxxx0000’                   Weekly program
                 B’xxxx0001’                   January
                 B’xxxx0010’                   February
                 B’xxxx0011’                   March
                 B’xxxx0100’                   April
                 B’xxxx0101’                   May
                 B’xxxx0110’                   June
                 B’xxxx0111’                   July
                 B’xxxx1000’                   August
                 B’xxxx1001’                   September
                 B’xxxx1010’                   October
                 B’xxxx1011’                   November
                 B’xxxx1100’                   December
                 B’xxxx1101’                   Monthly program
                 B’xxxx1110’                   Monthly program
                 B’xxxx1111’                   Monthly program

            Contents program byte3             Description
                 B’xxx00000’                   0h
                 B’xxx00001’                   1h
                      …                        …
                 B’xxx10111’                   23h
                 B’xx1xxxxx’                   Program group 1
                 B’x1xxxxxx’                   Program group 2
                 B’1xxxxxxx’                   Program group3




                                         VMB4AN PROTOCOL – edition 3                         45
Contents program byte4       Description
     B’xx000000’             0min
     B’xx000001’             1min
          …                  …
     B’xx111011’             59min

Contents program byte4             Contents program byte2            Description
     B’00xxxxxx’                        B’0000xxxx’                  Never
     B’00xxxxxx’                        B’0001xxxx’                  Day 1of the month
     B’00xxxxxx’                        B’0010xxxx’                  Day 2of the month
          …                                  …                       …
     B’01xxxxxx’                        B’1111xxxx’                  Day 31of the month
     B’10xxxxxx’                        B’0000xxxx’                  Never
     B’10xxxxxx’                        B’0001xxxx’                  Every Monday
     B’10xxxxxx’                        B’0010xxxx’                  Every Tuesday
          …                                  …                       …
     B’10xxxxxx’                        B’0111xxxx’                  Every Sunday
     B’10xxxxxx’                        B’1000xxxx’                  Every weekend (sa & su)
     B’10xxxxxx’                        B’1001xxxx’                  Every working day (mo…fr)
     B’10xxxxxx’                        B’1010xxxx’                  Every day except Sunday
     B’10xxxxxx’                        B’1011xxxx’                  Every day
     B’10xxxxxx’                        B’1100xxxx’                  Never
          …                                  …                       …
     B’11xxxxxx’                        B’1111xxxx’                  Never

Contents program byte5       Action
           0                 Unlock (channels 1...16)
           1                 Lock (channels 1...16)
           2                 Switch sensor to preset 1 (safe) mode (channels 9...12)
           3                 Switch sensor to preset 2 (night) mode (channels 9...12)
           4                 Switch sensor to preset 3 (day) mode (channels 9...12)
           5                 Switch sensor to preset 4 (comfort) mode (channels 9...12)

Contents program byte6        Channel
           1                     Alarm output 1
           2                     Alarm output 2
           3                     Alarm output 3
           4                     Alarm output 4
           5                     Alarm output 5
           6                     Alarm output 6
           7                     Alarm output 7
           8                     Alarm output 8
           9                     Sensor 1
          10                     Sensor 2
          11                     Sensor 3
          12                     Sensor 4
          13                     Analog output 1
          14                     Analog output 2
          15                     Analog output 3
          16                     Analog output 4




                         VMB4AN PROTOCOL – edition 3                                             46
EEprom memory map:
   Address   Contents                                  Address       Contents
   0x1000’   Bank 0: Day of week                       0x1001        Bank 1: Day of month
   0x1002’   Bank 0: Month                             0x1003’       Bank 1: Year low byte
   0x1004’   Bank 0: Year high byte                    0x1005’       Bank 1: Program group number
   0x1006’   Bank 0:                                   0x1007        Bank 1:
   0x1008’   Bank 0:                                   0x1009        Bank 1:
   0x100A    Bank 0:                                   0x100B        Bank 1:
   0x100C    Bank 0:                                   0x100D        Bank 1:
   0x100E    Bank 0:                                   0x100F        Bank 1: current bank number

   0x13F0    Bank 63: Day of week                      0x13F 1       Bank 63: Day of month
   0x13F2    Bank 63: Month                            0x13F 3       Bank 63: Year low byte
   0x13F4    Bank 63: Year high byte                   0x13F 5       Bank 63:
   0x13F6    Bank 63:                                  0x13F 7       Bank 63:
   0x13F8    Bank 63:                                  0x13F9        Bank 63:
   0x13FA    Bank 63:                                  0x13FB        Bank 63:
   0x13FC    Bank 63:                                  0x13FD’       Bank 63:
   0x13FE    Bank 63:                                  0x13FF        Bank 63: current bank number




                                       VMB4AN PROTOCOL – edition 3                                  47
